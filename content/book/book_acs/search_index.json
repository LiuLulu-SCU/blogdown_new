[["index.html", "数据库Stata常用操作 简介", " 数据库Stata常用操作 刘卢路 2021年9月6日 简介 记录一些Stata常用命令 "],["基于stata使用rmarkdown书写动态文档statamarkdown.html", "1 基于Stata使用RMarkdown书写动态文档（Statamarkdown） 1.1 下载Statamarkdown并连接Stata 1.2 链接各个代码块", " 1 基于Stata使用RMarkdown书写动态文档（Statamarkdown） 1.1 下载Statamarkdown并连接Stata 1.1.1 下载Statamarkdown library(devtools) # 如果没有devtools包，需要提前安装 install_github(&quot;hemken/Statamarkdown&quot;) 1.1.2 加载Statamarkdown library(Statamarkdown) stataexe &lt;- &quot;E:/STATA13/安装程序/StataMP-64.exe&quot; knitr::opts_chunk$set(engine.path=list(stata=stataexe)) 1.1.3 例子 sysuse auto summarize Variable | Obs Mean Std. Dev. Min Max -------------+-------------------------------------------------------- make | 0 price | 74 6165.257 2949.496 3291 15906 mpg | 74 21.2973 5.785503 12 41 rep78 | 69 3.405797 .9899323 1 5 headroom | 74 2.993243 .8459948 1.5 5 -------------+-------------------------------------------------------- trunk | 74 13.75676 4.277404 5 23 weight | 74 3019.459 777.1936 1760 4840 length | 74 187.9324 22.26634 142 233 turn | 74 39.64865 4.399354 31 51 displacement | 74 197.2973 91.83722 79 425 -------------+-------------------------------------------------------- gear_ratio | 74 3.014865 .4562871 2.19 3.89 foreign | 74 .2972973 .4601885 0 1 1.2 链接各个代码块 注意，每个STATA代码块都是作为一个独立的STATA会话来执行，彼此相互独立。即，第一个代码块调用的数据和生成的新变量，第二个代码块并不会自动继承，而需要重新调用和生成。 1.2.1 collectcode代码块选项 当Statamarkdown包加载之后，Stata代码块就可以利用collectcode选项作为块钩（chunk hook），把各代码块连接起来。这样前面块调用的数据和生成的新变量，后面的代码直接继承。Markdown代码如下。 ```stata sysuse auto generate gpm = 1/mpg summarize price gpm ``` ```stata regress price gpm ``` "],["useful.html", "2 有用的统计数字 2.1 参保人数 2.2 医保药店", " 2 有用的统计数字 2.1 参保人数 天津市城镇职工基本医疗保险数据库覆盖了天津市所有用人单位的职工及退休人员，截至2020年，天津市城职库参保人数为674.9万人，约占天津市2020年末总人口数的50.3% 。 。 天津市城镇职工和城乡居民基本医疗保险数据库覆盖了天津市所有交保居民、用人单位的职工、退休人员，截至2020年，天津市城职和城乡库参保人数为1332.0万人，约占天津市2020年末总人口数的96.1% 。 2.2 医保药店 利用2017城职门诊库，医保数据库中有688家药店，天津有2203家药店，医保药店的比例为31.23%。 use &quot;I:\\cz\\fyxx\\2017\\2017_mzfyxx_1.dta&quot;,clear keep if yylb==&quot;00&quot; bysort yymc:keep if _n==1 set more off forvalues i=2/16{ append using &quot;I:\\cz\\fyxx\\2017\\2017_mzfyxx_`i&#39;.dta&quot;, force keep if yylb==&quot;00&quot; bysort yymc:keep if _n==1 } codebook yymc "],["数据库常用操作.html", "3 数据库常用操作 3.1 计算两个日期之间的间隔天数 3.2 顺序号提取诊断时间 3.3 计算年龄 3.4 识别女性 3.5 确定入组日 3.6 判断断保 3.7 计算医疗资源使用 3.8 任意90天内有三次诊断 3.9 30天内取最高级别 3.10 规范变量 3.11 计算CCI", " 3 数据库常用操作 3.1 计算两个日期之间的间隔天数 比如计算入院时间（rysj）和出院时间（cysj）之间的间隔天数： gen gap=cysj-rysj+1 3.2 顺序号提取诊断时间 gen year=substr(sxh,8,2) gen month=substr(sxh,10,2) gen day=substr(sxh,12,2) destring year, replace destring month, replace destring day, replace replace year = year+2000 codebook year month day gen zdsj=mdy(month,day,year) format zdsj %d 3.3 计算年龄 以住院库为例 gen nl=int((cysj-csrq+1)/365.25) 3.4 识别女性 gen female=0 replace female=1 if strmatch(xb,&quot;女&quot;) replace female=1 if strmatch(xb,&quot;2&quot;) destring female,replace tab female 3.5 确定入组日 sort grbm cysj bysort grbm:keep if _n==1 //保留同一个人出院时间最早的记录 3.6 判断断保 15年及15年之前的1年1条参保信息（1年1交，要交就是全年交费，不交就是全年未交费），16年及16年之后是1个月1条参保信息。 以14.1.1日入组患者为例， 先去看cbxx库中有没有，如果没有说明全年未参保，断保时间为14年 3.7 计算医疗资源使用 3.7.1 基线期医疗资源使用 假设我现在有基线期的费用信息库 总人群的住院次数和天数 第一步，先保留住院类型的就诊信息，然后将一个人多行的就诊信息，总结为一个人一行。 use &quot;G:\\ACS\\explore\\ACS_diagnose\\baseline.dta&quot;,clear keep if LX==3 //保留住院类型的就诊记录（LX=3） // 住院次数 bysort grbm: gen zycs=_N codebook zycs //总住院天数 bysort grbm:egen zlos=sum(zyts) bysort grbm:keep if _n==1 keep grbm zycs zlos save &quot;G:\\ACS\\explore\\baseline characteristic\\Cost\\HRU_zy.dta&quot;, replace //和我的样本进行merge use &quot;G:\\ACS\\explore\\DAPT\\overall_sample_8471_with_covariates&quot;,clear merge 1:1 grbm using &quot;G:\\ACS\\explore\\baseline characteristic\\Cost\\HRU_zy.dta&quot; drop if _merge==2 drop _merge replace zycs=0 if zycs==. gen zy=0 if zycs==0 replace zy=1 if zycs!=0 replace zlos=0 if zlos==. //进行分组检验 tab zy reval,chi2 3.8 任意90天内有三次诊断 use &quot;H:\\COPD\\subgroup\\fyxx_COPD_bysort.dta&quot; keep grbm zdsj sort grbm zdsj bysort grbm: gen zdcs=_N drop if zdcs&lt;3 codebook grbm //unique values: 2209 missing .: 0/19085 bysort grbm: gen jzcs=_n bysort grbm: gen gap=zdsj[_n]-zdsj[_n-1] //2209 missing values generated //每个人的第一条记录的gap会缺失 bysort grbm: gen GAP=zdsj[_n]-zdsj[_n-2] //4418 missing values generated //每个人的第一条和第二条记录的GAP会缺失 drop if GAP==. keep if GAP&lt;=90 3.9 30天内取最高级别 //30天内的取更高严重级别（法二） { //处理第一行与第二行的gap { use &quot;H:\\COPD\\subgroup\\moderate_severeAECOPD_total.dta&quot; //7483行记录 drop sxh LX order grbm zdsj level sort grbm zdsj //生成num变量，为每个人的第几行 bysort grbm: gen num=_n bysort grbm: gen gap=zdsj[2]-zdsj[1] //若不是第2行，则gap变为缺失 replace gap=. if num!=2 order grbm zdsj level gap num codebook zdsj if gap&lt;=30 //645 gen newlevel=. bysort grbm: replace newlevel=max(level[2],level[1]) if gap&lt;=30 //(645 real changes made) codebook newlevel { /* tabulation: Freq. Value 418 1 227 2 6838 . */ } gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(418 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(36 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(148 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(43 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(43 observations deleted) //剩6838行 //以下框起来的44-79行，一直循环，直到为0 { drop gap num del newlevel sort grbm zdsj bysort grbm: gen num=_n bysort grbm: gen gap=zdsj[2]-zdsj[1] replace gap=. if num!=2 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //上一轮删除后，原第3行（新第2行）与第一行之间的gap仍&lt;=30 //236, 73,35,14,9,7,4,2,1,1,1,1,1,1,no observations gen newlevel=. bysort grbm: replace newlevel=max(level[2],level[1]) if gap&lt;=30 //(236 real changes made) codebook newlevel { /* tabulation: Freq. Value 153 1 83 2 6602 . */ } gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(153 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(14 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(60 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(9 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(9 observations deleted) //no observations } } //说明第一行与第二行再也没有gap&lt;=30天了，接下来开始处理第3行和第2行的gap { drop gap num sort grbm zdsj bysort grbm: gen num=_n bysort grbm: gen gap=zdsj[3]-zdsj[2] replace gap=. if num!=3 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //382，第3行与第2行的gap&lt;=30 gen newlevel=. bysort grbm: replace newlevel=max(level[3],level[2]) if gap&lt;=30 //(382 real changes made) codebook newlevel { /* tabulation: Freq. Value 318 1 64 2 6070 . */ } gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(318 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(9 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(41 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(14 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(14 observations deleted) //剩6070行 //以下语句循环至0 { drop gap num del newlevel sort grbm zdsj bysort grbm: gen num=_n bysort grbm: gen gap=zdsj[3]-zdsj[2] replace gap=. if num!=3 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //新的第3行（原第4行）与第2行的gap仍有&lt;=30的 //140, 43 ，17 ，10 ，3 ，3 ，2 ，1 ,no observations gen newlevel=. bysort grbm: replace newlevel=max(level[3],level[2]) if gap&lt;=30 //(140 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(112 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(6 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(16 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(6 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(14 observations deleted) //剩下5851行 } } //处理第4行与第3行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,38] bysort grbm: gen gap=zdsj[4]-zdsj[3] replace gap=. if num!=4 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //258，第3行与第2行的gap&lt;=30 gen newlevel=. bysort grbm: replace newlevel=max(level[4],level[3]) if gap&lt;=30 //(258 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(211 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(10 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(20 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(17 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(14 observations deleted) //剩5593行 //以下语句一直重复循环至0 { drop gap num del newlevel sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,37] bysort grbm: gen gap=zdsj[4]-zdsj[3] replace gap=. if num!=4 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //108，34 ，10 ，4 ，2 ，no observations gen newlevel=. bysort grbm: replace newlevel=max(level[4],level[3]) if gap&lt;=30 //(108 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(91 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(5 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(9 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(3 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //剩下5435行 } } //处理第5行与第4行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,35] bysort grbm: gen gap=zdsj[5]-zdsj[4] replace gap=. if num!=5 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //185， gen newlevel=. bysort grbm: replace newlevel=max(level[5],level[4]) if gap&lt;=30 //(185 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(165 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(2 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(11 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(7 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(7 observations deleted) //剩5250行 drop gap num del newlevel sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,34] bysort grbm: gen gap=zdsj[5]-zdsj[4] replace gap=. if num!=5 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //75，18，7 ，4， 3 ，2 ，1 ，1 ，1 ，no observations gen newlevel=. bysort grbm: replace newlevel=max(level[5],level[4]) if gap&lt;=30 //(75 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(68 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(1 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(5 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(1 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(1 observations deleted) //剩5138行 } //处理第6行与第5行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,33] codebook grbm if num&gt;=6 //unique values: 150 missing .: 0/682 bysort grbm: gen gap=zdsj[6]-zdsj[5] replace gap=. if num!=6 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //115 gen newlevel=. bysort grbm: replace newlevel=max(level[6],level[5]) if gap&lt;=30 //(115 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(106 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(3 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(3 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(3 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(3 observations deleted) //剩5023行 //以下循环一直到0 { drop gap num newlevel del sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,32] codebook grbm if num&gt;=6 //unique values: 130 missing .: 0/567 bysort grbm: gen gap=zdsj[6]-zdsj[5] replace gap=. if num!=6 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //52， 14,6,2,1,1,1,1,1,1,1,1, no observations gen newlevel=. bysort grbm: replace newlevel=max(level[6],level[5]) if gap&lt;=30 //(52 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(47 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(2 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(2 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(1 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(1 observations deleted) //剩4941行 } } //处理第7行与第6行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,26] codebook grbm if num&gt;=7 //unique values: 84 missing .: 0/363 bysort grbm: gen gap=zdsj[7]-zdsj[6] replace gap=. if num!=7 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //67 gen newlevel=. bysort grbm: replace newlevel=max(level[7],level[6]) if gap&lt;=30 //(67 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(60 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(1 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(1 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(5 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(5 observations deleted) //剩4874行 //以下循环一直到0 { drop gap num newlevel del sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,25] codebook grbm if num&gt;=7 //unique values: 70 missing .: 0/296 bysort grbm: gen gap=zdsj[7]-zdsj[6] replace gap=. if num!=7 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //33, 11,6, no observations gen newlevel=. bysort grbm: replace newlevel=max(level[7],level[6]) if gap&lt;=30 //(33 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(30 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(0 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(3 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(0 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(0 observations deleted) //剩4824条记录 } } //处理第8行与第7行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,23] codebook grbm if num&gt;=8 //unique values: 45 missing .: 0/187 bysort grbm: gen gap=zdsj[8]-zdsj[7] replace gap=. if num!=8 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //37 gen newlevel=. bysort grbm: replace newlevel=max(level[8],level[7]) if gap&lt;=30 //(37 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(33 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(0 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(3 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(1 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(1 observations deleted) //以下循环，一直到为0 { drop gap num newlevel del sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,22] codebook grbm if num&gt;=8 //unique values: 36 missing .: 0/150 bysort grbm: gen gap=zdsj[8]-zdsj[7] replace gap=. if num!=8 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //20， 7 ，3 ，no observations gen newlevel=. bysort grbm: replace newlevel=max(level[8],level[7]) if gap&lt;=30 codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 drop if newlevel==2&amp;level&lt;level[_n-1] drop if newlevel==2&amp;level==level[_n-1] replace del=0 if newlevel==2&amp;level&gt;level[_n-1] replace del=1 if del[_n+1]==0 drop if del==1 //剩4757条 } } //处理第9行与第8行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,20] codebook grbm if num&gt;=9 //unique values: 26 missing .: 0/87 bysort grbm: gen gap=zdsj[9]-zdsj[8] replace gap=. if num!=9 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //22 gen newlevel=. bysort grbm: replace newlevel=max(level[9],level[8]) if gap&lt;=30 //(22 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(21 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(1 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(0 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(0 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(0 observations deleted) //以下循环，一直到为0 { drop gap num newlevel del sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,19] codebook grbm if num&gt;=9 //unique values: 24 missing .: 0/65 bysort grbm: gen gap=zdsj[9]-zdsj[8] replace gap=. if num!=9 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //13，5 ，1,11 ，1，1， no observations gen newlevel=. bysort grbm: replace newlevel=max(level[9],level[8]) if gap&lt;=30 codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 drop if newlevel==2&amp;level&lt;level[_n-1] drop if newlevel==2&amp;level==level[_n-1] replace del=0 if newlevel==2&amp;level&gt;level[_n-1] replace del=1 if del[_n+1]==0 drop if del==1 //剩4712条 } } //处理第10与9行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,15] codebook grbm if num&gt;=10 //unique values: 11 missing .: 0/23 bysort grbm: gen gap=zdsj[10]-zdsj[9] replace gap=. if num!=10 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //11 gen newlevel=. bysort grbm: replace newlevel=max(level[10],level[9]) if gap&lt;=30 //(11 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(10 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(0 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(0 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(1 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(1 observations deleted) //以下循环，一直到为0 { drop gap num newlevel del sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,14] codebook grbm if num&gt;=10 //unique values: 5 missing .: 0/12 bysort grbm: gen gap=zdsj[10]-zdsj[9] replace gap=. if num!=10 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //5， 1 ，no observations gen newlevel=. bysort grbm: replace newlevel=max(level[10],level[9]) if gap&lt;=30 codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 drop if newlevel==2&amp;level&lt;level[_n-1] drop if newlevel==2&amp;level==level[_n-1] replace del=0 if newlevel==2&amp;level&gt;level[_n-1] replace del=1 if del[_n+1]==0 drop if del==1 //剩4695条 } } //处理第11与10行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,13] codebook grbm if num&gt;=11 //unique values: 2 missing .: 0/4 bysort grbm: gen gap=zdsj[11]-zdsj[10] replace gap=. if num!=11 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //2 gen newlevel=. bysort grbm: replace newlevel=max(level[11],level[10]) if gap&lt;=30 //(2 real changes made) codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 //(2 observations deleted) drop if newlevel==2&amp;level&lt;level[_n-1] //(0 observations deleted) drop if newlevel==2&amp;level==level[_n-1] //(0 observations deleted) replace del=0 if newlevel==2&amp;level&gt;level[_n-1] //(0 real changes made) replace del=1 if del[_n+1]==0 drop if del==1 //(0 observations deleted) //以下循环，一直到为0 { drop gap num newlevel del sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,12] codebook grbm if num&gt;=11 //unique values: 1 missing .: 0/2 bysort grbm: gen gap=zdsj[11]-zdsj[10] replace gap=. if num!=11 order grbm zdsj level gap codebook zdsj if gap&lt;=30 //1， 1 ，no observations gen newlevel=. bysort grbm: replace newlevel=max(level[11],level[10]) if gap&lt;=30 codebook newlevel gen del=. order grbm zdsj level gap newlevel del num drop if newlevel==1 drop if newlevel==2&amp;level&lt;level[_n-1] drop if newlevel==2&amp;level==level[_n-1] replace del=0 if newlevel==2&amp;level&gt;level[_n-1] replace del=1 if del[_n+1]==0 drop if del==1 //剩4691条 } } //处理第12与11行 { drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //[1,10] codebook grbm if num&gt;=12 //no observations bysort grbm: gen gap=zdsj[12]-zdsj[11] //没有有12行的记录了 } drop gap num sort grbm zdsj bysort grbm: gen num=_n codebook num //range: [1,10] sort grbm zdsj bysort grbm: gen gap=zdsj[_n]-zdsj[_n-1] order grbm zdsj level gap codebook zdsj if gap&lt;=30 //no observations //4691行记录，相较于昨日的4015行记录，保留了误删的行数 save &quot;H:\\COPD\\subgroup\\moderate_severeAECOPD_total_done.dta&quot; } //分CD组 { use &quot;H:\\COPD\\subgroup\\moderate_severeAECOPD_total_done.dta&quot; bysort grbm: gen AECOPDcs=_N codebook grbm //2301人发生过至少一次AECOPD gen CD=0 replace CD=1 if AECOPDcs&gt;=2 keep if CD==1 bysort grbm:keep if _n==1 keep grbm CD codebook grbm //unique values: 1040 missing .: 0/1040 save &quot;H:\\COPD\\subgroup\\moderate_severeAECOPD_total_CD.dta&quot;, replace use &quot;H:\\COPD\\subgroup\\moderate_severeAECOPD_total_done.dta&quot; keep if level==1 bysort grbm: gen moderateAECOPDcs=_N bysort grbm:keep if _n==1 keep grbm moderateAECOPDcs codebook grbm //unique values: 1609 missing .: 0/1609 save &quot;H:\\COPD\\subgroup\\moderate_AECOPDcs_grbm.dta&quot;, replace use &quot;H:\\COPD\\subgroup\\moderate_severeAECOPD_total_done.dta&quot; keep if level==2 bysort grbm: gen severeAECOPDcs=_N bysort grbm:keep if _n==1 keep grbm severeAECOPDcs codebook grbm //unique values: 982 missing .: 0/982 save &quot;H:\\COPD\\subgroup\\severe_AECOPDcs_grbm.dta&quot;, replace use &quot;H:\\COPD\\subgroup\\588_zyzdzy_grbm.dta&quot; drop zyzdzycs codebook grbm //588 merge 1:1 grbm using &quot;H:\\COPD\\subgroup\\severe_AECOPDcs_grbm.dta&quot; { /* Result # of obs. ----------------------------------------- not matched 394 from master 0 (_merge==1) from using 394 (_merge==2) matched 588 (_merge==3) ----------------------------------------- */ } drop _merge replace sfzyzdzy=0 if sfzyzdzy==. //(394 real changes made) merge 1:1 grbm using &quot;H:\\COPD\\subgroup\\moderate_AECOPDcs_grbm.dta&quot; { /* Result # of obs. ----------------------------------------- not matched 2,011 from master 692 (_merge==1) from using 1,319 (_merge==2) matched 290 (_merge==3) ----------------------------------------- */ } drop _merge replace sfzyzdzy=0 if sfzyzdzy==. //(1319 real changes made) replace severeAECOPDcs=0 if severeAECOPDcs==. //(1319 real changes made) replace moderateAECOPDcs=0 if moderateAECOPDcs==. //(692 real changes made) codebook grbm //unique values: 2301 missing .: 0/2301 gen AECOPDzcs=severeAECOPDcs+moderateAECOPDcs save &quot;H:\\COPD\\subgroup\\AECOPDzcs_2301_grbm.dta&quot;, replace } //与目标人群 8733人merge { use &quot;H:\\COPD\\ppl_identification\\2017-2018_inclusion_8733_grbm.dta&quot; merge 1:1 grbm using &quot;H:\\COPD\\subgroup\\AECOPDzcs_2301_grbm.dta&quot; { /* Result # of obs. ----------------------------------------- not matched 7,916 from master 7,174 (_merge==1) from using 742 (_merge==2) matched 1,559 (_merge==3) ----------------------------------------- */ } drop if _merge==2 drop _merge codebook grbm //unique values: 8733 missing .: 0/8733 replace sfzyzdzy=0 if sfzyzdzy==. //(7174 real changes made) replace severeAECOPDcs=0 if severeAECOPDcs==. //(7174 real changes made) replace moderateAECOPDcs=0 if moderateAECOPDcs==. //(7174 real changes made) replace AECOPDzcs=0 if AECOPDzcs==. //(7174 real changes made) gen CD=0 replace CD=1 if sfzyzdzy==1 //422 replace CD=1 if AECOPDzcs&gt;=2 //500 codebook grbm if AECOPDzcs &amp; AECOPDzcs //1559 tab CD { CD | Freq. Percent Cum. ------------+----------------------------------- 0 | 7,811 89.44 89.44 1 | 922 10.56 100.00 ------------+----------------------------------- Total | 8,733 100.00 } //CD组922人（10.56%），AB组7851人（89.44%） save &quot;H:\\COPD\\subgroup\\CD.dta&quot;, replace } } 3.10 规范变量 3.10.1 规范变量名称 15门特明细库 use &quot;G:\\cz\\fymx\\2015\\2015_mtfymx_1.dta&quot;,clear rename ykd042 mtxh rename ykd086 fyfssj rename yka009 sfdlbm //rename yka010 sfxmbm rename yka012 xmmc rename yka013 yyxmmc rename aka070 jx rename aka074 gg rename yka032 yf rename yka033 yl rename ykd061 fcfybs rename ykd019 dj rename ykd020 sl rename ykc016 fsje save &quot;G:\\cz\\fymx\\2015\\2015_mtfymx_1.dta&quot;,replace 3.10.2 规范参保信息库 2018-2020发现有的人一个月有两条记录，删去重复的 //发现有的人一个月有两条记录，删去重复的 //2018 use &quot;G:\\cz\\cbxx\\cz_cbxx_2018_isjf.dta&quot;, clear gen month=real(substr(AAE003,5,6)) sort grbm month bysort grbm month:gen digit=_n tab digit /* digit | Freq. Percent Cum. ------------+----------------------------------- 1 | 18,311,474 100.00 100.00 2 | 909 0.00 100.00 ------------+----------------------------------- Total | 18,312,383 100.00 */ drop if digit!=1 //(909 observations deleted) drop digit month save &quot;G:\\cz\\cbxx\\cz_cbxx_2018_isjf.dta&quot;,replace //2019 use &quot;G:\\cz\\cbxx\\cz_cbxx_2019_isjf.dta&quot;, clear gen month=real(substr(AAE003,5,6)) sort grbm month bysort grbm month:gen digit=_n tab digit /* digit | Freq. Percent Cum. ------------+----------------------------------- 1 | 18,898,596 100.00 100.00 2 | 842 0.00 100.00 ------------+----------------------------------- Total | 18,899,438 100.00 */ drop if digit!=1 //(842 observations deleted) drop digit month save &quot;G:\\cz\\cbxx\\cz_cbxx_2019_isjf.dta&quot;,replace //2020 use &quot;G:\\cz\\cbxx\\cz_cbxx_2019_isjf.dta&quot;, clear gen month=real(substr(AAE003,5,6)) sort grbm month bysort grbm month:gen digit=_n tab digit /* digit | Freq. Percent Cum. ------------+----------------------------------- 1 | 18,898,596 100.00 100.00 ------------+----------------------------------- Total | 18,898,596 100.00 */ drop if digit!=1 //0 drop digit month save &quot;G:\\cz\\cbxx\\cz_cbxx_2020_isjf.dta&quot;,replace 3.10.3 标化cbxx库一个月一条 思路，先构造一个数据集，里面面有参保人的grbm*12行，对应1-12月。 用cbxx库中grbm和月份匹配构造的数据集，匹配上（_merge==3）说明此人在对应月份缴费，没匹配上（_merge==2）说明此人在对应月份没缴费。 //构造数据 use &quot;G:\\cz\\cbxx\\cz_cbxx_2016_isjf.dta&quot;,clear keep grbm bysort grbm:keep if _n==1 codebook grbm //unique values: 1633432 missing .: 0/1633432 expand 12 //重复12次， 16年之后是否缴费是按月显示，1年12个月 bysort grbm:gen month=_n save &quot;G:\\sy\\cz_cbxx_2016_gz.dta&quot;,replace //现有数据 use &quot;G:\\cz\\cbxx\\cz_cbxx_2016_isjf.dta&quot;,clear gen month=substr(AAE003,5,2) destring month, replace bysort grbm:gen sum=_N //年参保记录数 merge m:m grbm month using &quot;G:\\sy\\cz_cbxx_2016_gz.dta&quot; gen isjf=. replace isjf=1 if _merge==3 replace isjf=0 if _merge==2 drop _merge sort grbm month move isjf sum keep grbm month isjf bysort grbm:egen sum=sum(isjf) save &quot;G:\\cz\\cbxx\\cz_cbxx_2016.dta&quot;,replace 3.11 计算CCI //（一）计算CCI 15115人有14907人有基线 { //17种相关疾病识别 固定公式，均可套用 { //1. 心肌梗死 MI 2109/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; codebook grbm //unique values: 14907 missing .: 0/1351692 sort grbm gen mi=0 replace mi=1 if strmatch(mzzd,&quot;*心梗*&quot;) replace mi=1 if strmatch(mzzd,&quot;*心肌梗塞*&quot;) replace mi=1 if strmatch(mzzd,&quot;*心肌梗死*&quot;) replace mi=1 if strmatch(mzzd,&quot;*梗死后心*&quot;) replace mi=1 if strmatch(mzzd,&quot;*心痛*&quot;) replace mi=1 if strmatch(mzzd,&quot;*胸痹*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧心*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧ST*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧非ST*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧st*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧非st*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧Q*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧q*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧前*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧侧*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧下*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧高*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧间*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧广泛*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧左心室*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧右心室*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性心*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性ST*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性非ST*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性st*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性非st*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性Q*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性q*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性前*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性侧*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性下*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性高*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性间*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性广泛*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性左心室*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧性右心室*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型心*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型ST*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型非ST*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型st*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型非st*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型Q*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型q*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型前*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型侧*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型下*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型高*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型间*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型广泛*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型左心室*&quot;) replace mi=1 if strmatch(mzzd,&quot;*陈旧型右心室*&quot;) replace mi=1 if strmatch(mtzd,&quot;*心梗*&quot;) replace mi=1 if strmatch(mtzd,&quot;*心肌梗塞*&quot;) replace mi=1 if strmatch(mtzd,&quot;*心肌梗死*&quot;) replace mi=1 if strmatch(mtzd,&quot;*梗死后心*&quot;) replace mi=1 if strmatch(mtzd,&quot;*心痛*&quot;) replace mi=1 if strmatch(mtzd,&quot;*胸痹*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧心*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧ST*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧非ST*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧st*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧非st*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧Q*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧q*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧前*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧侧*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧下*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧高*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧间*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧广泛*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧左心室*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧右心室*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性心*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性ST*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性非ST*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性st*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性非st*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性Q*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性q*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性前*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性侧*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性下*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性高*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性间*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性广泛*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性左心室*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧性右心室*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型心*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型ST*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型非ST*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型st*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型非st*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型Q*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型q*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型前*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型侧*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型下*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型高*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型间*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型广泛*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型左心室*&quot;) replace mi=1 if strmatch(mtzd,&quot;*陈旧型右心室*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*心梗*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*心肌梗塞*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*心肌梗死*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*梗死后心*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*心痛*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*胸痹*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧心*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧ST*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧非ST*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧st*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧非st*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧Q*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧q*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧前*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧侧*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧下*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧高*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧间*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧广泛*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧左心室*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧右心室*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性心*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性ST*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性非ST*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性st*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性非st*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性Q*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性q*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性前*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性侧*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性下*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性高*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性间*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性广泛*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性左心室*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧性右心室*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型心*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型ST*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型非ST*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型st*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型非st*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型Q*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型q*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型前*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型侧*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型下*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型高*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型间*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型广泛*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型左心室*&quot;) replace mi=1 if strmatch(cyzdmc,&quot;*陈旧型右心室*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*心梗*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*心肌梗塞*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*心肌梗死*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*梗死后心*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*心痛*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*胸痹*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧心*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧ST*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧非ST*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧性ST*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧性非ST*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧型非ST*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧型ST*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧心*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧前壁*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧下壁*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧侧壁*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧性心*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧性前壁*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧性下壁*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧性侧壁*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧型心*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧型前壁*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧型下壁*&quot;) replace mi=1 if strmatch(cyzdms,&quot;*陈旧型侧壁*&quot;) replace mi=1 if strmatch(cyzd,&quot;*I21*&quot;) replace mi=1 if strmatch(cyzd,&quot;*I21.*&quot;) replace mi=1 if strmatch(cyzd,&quot;*I22*&quot;) replace mi=1 if strmatch(cyzd,&quot;*I22.*&quot;) replace mi=1 if strmatch(cyzd,&quot;*I25.2*&quot;) keep if mi==1 keep grbm mi bysort grbm:keep if _n==1 codebook grbm //2109 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_mi.dta&quot; } //2. 充血性心衰_心衰 con_hf 1388/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen con_hf=0 replace con_hf=1 if strmatch(mzzd,&quot;*心力衰竭*&quot;) replace con_hf=1 if strmatch(mzzd,&quot;*心衰*&quot;) replace con_hf=1 if strmatch(mtzd,&quot;*心力衰竭*&quot;) replace con_hf=1 if strmatch(mtzd,&quot;*心衰*&quot;) replace con_hf=1 if strmatch(cyzdms,&quot;*心力衰竭*&quot;) replace con_hf=1 if strmatch(cyzdms,&quot;*心衰*&quot;) replace con_hf=1 if strmatch(cyzdmc,&quot;*心力衰竭*&quot;) replace con_hf=1 if strmatch(cyzdmc,&quot;*心衰*&quot;) replace con_hf=1 if strmatch(cyzd,&quot;*I09.9*&quot;)|strmatch(cyzd,&quot;*I11.0*&quot;)|strmatch(cyzd,&quot;*I13.0*&quot;)|strmatch(cyzd,&quot;*I13.2*&quot;)|strmatch(cyzd,&quot;*I25.5*&quot;)|strmatch(cyzd,&quot;*I42.0*&quot;)|strmatch(cyzd,&quot;*I42.5*&quot;)|strmatch(cyzd,&quot;*I42.6*&quot;)|strmatch(cyzd,&quot;*I42.7*&quot;)|strmatch(cyzd,&quot;*I42.8*&quot;)|strmatch(cyzd,&quot;*I42.9*&quot;)|strmatch(cyzd,&quot;*I43*&quot;)|strmatch(cyzd,&quot;*I50*&quot;)|strmatch(cyzd,&quot;*P29.0*&quot;) keep if con_hf==1 keep grbm con_hf bysort grbm:keep if _n==1 codebook grbm //1388 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_con_hf.dta&quot; } //3. 外周血管病 per_vd 1002/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen per_vd=0 replace per_vd=1 if strmatch(mzzd,&quot;*主动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*主动脉硬化*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*肾脏动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*手足发绀*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*红斑性肢痛*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*红绀肿*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*间歇性跛行*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*间歇跛行*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*动脉痉挛*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*布拉特*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*肾小动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*肾小动脉硬化*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*肢端动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*肢端动脉硬化*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*门克伯格*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*主动脉瘤*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*颈动脉瘤*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*上肢动脉瘤*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*肾脏动脉瘤*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*髂总动脉瘤*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*髂内动脉瘤*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*雷诺氏*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*柏格*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*下肢动脉瘤*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*血栓性闭塞性脉管炎*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*舒尔兹*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*诺兰吉尔氏*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*腹主动脉栓塞*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*腹主动脉血栓*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*上肢动脉栓塞*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*上肢主动脉血栓*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*肢端动脉栓塞*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*肢端主动脉血栓*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*髂总动脉栓塞*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*髂总动脉血栓*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*髂内动脉栓塞*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*髂内动脉血栓*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*获得性动静脉瘘*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*动静脉瘤性静脉曲张*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*获得性动静脉瘤*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*动脉肌纤维发育异常*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*动脉坏疽*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*主动脉炎*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*遗传性出血性毛细血管*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*蛛状痣*&quot;) replace per_vd=1 if strmatch(mzzd,&quot;*周围血管病*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*主动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*主动脉硬化*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*肾脏动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*手足发绀*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*红斑性肢痛*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*红绀肿*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*间歇性跛行*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*间歇跛行*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*动脉痉挛*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*布拉特*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*肾小动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*肾小动脉硬化*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*肢端动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*肢端动脉硬化*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*门克伯格*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*主动脉瘤*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*颈动脉瘤*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*上肢动脉瘤*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*肾脏动脉瘤*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*髂总动脉瘤*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*髂内动脉瘤*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*雷诺氏*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*柏格*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*下肢动脉瘤*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*血栓性闭塞性脉管炎*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*舒尔兹*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*诺兰吉尔氏*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*腹主动脉栓塞*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*腹主动脉血栓*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*上肢动脉栓塞*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*上肢主动脉血栓*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*肢端动脉栓塞*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*肢端主动脉血栓*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*髂总动脉栓塞*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*髂总动脉血栓*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*髂内动脉栓塞*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*髂内动脉血栓*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*获得性动静脉瘘*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*动静脉瘤性静脉曲张*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*获得性动静脉瘤*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*动脉肌纤维发育异常*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*动脉坏疽*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*主动脉炎*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*遗传性出血性毛细血管*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*蛛状痣*&quot;) replace per_vd=1 if strmatch(mtzd,&quot;*周围血管病*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*主动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*主动脉硬化*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*肾脏动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*手足发绀*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*红斑性肢痛*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*红绀肿*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*间歇性跛行*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*间歇跛行*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*动脉痉挛*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*布拉特*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*肾小动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*肾小动脉硬化*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*肢端动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*肢端动脉硬化*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*门克伯格*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*主动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*颈动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*上肢动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*肾脏动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*髂总动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*髂内动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*雷诺氏*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*柏格*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*下肢动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*血栓性闭塞性脉管炎*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*舒尔兹*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*诺兰吉尔氏*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*腹主动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*腹主动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*上肢动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*上肢主动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*肢端动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*肢端主动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*髂总动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*髂总动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*髂内动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*髂内动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*获得性动静脉瘘*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*动静脉瘤性静脉曲张*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*获得性动静脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*动脉肌纤维发育异常*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*动脉坏疽*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*主动脉炎*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*遗传性出血性毛细血管*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*蛛状痣*&quot;) replace per_vd=1 if strmatch(cyzdms,&quot;*周围血管病*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*主动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*主动脉硬化*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*肾脏动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*手足发绀*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*红斑性肢痛*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*红绀肿*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*间歇性跛行*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*间歇跛行*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*动脉痉挛*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*布拉特*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*肾小动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*肾小动脉硬化*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*肢端动脉粥样硬化*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*肢端动脉硬化*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*门克伯格*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*主动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*颈动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*上肢动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*肾脏动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*髂总动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*髂内动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*雷诺氏*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*柏格*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*下肢动脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*血栓性闭塞性脉管炎*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*舒尔兹*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*诺兰吉尔氏*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*腹主动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*腹主动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*上肢动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*上肢主动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*肢端动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*肢端主动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*髂总动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*髂总动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*髂内动脉栓塞*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*髂内动脉血栓*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*获得性动静脉瘘*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*动静脉瘤性静脉曲张*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*获得性动静脉瘤*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*动脉肌纤维发育异常*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*动脉坏疽*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*主动脉炎*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*遗传性出血性毛细血管*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*蛛状痣*&quot;) replace per_vd=1 if strmatch(cyzdmc,&quot;*周围血管病*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*I70*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*I71*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*I73.1*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*I73.8*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*I73.9*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*I77.1*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*I79.0*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*I79.2*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*K55.1*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*K55.8*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*Z95.8*&quot;) replace per_vd=1 if strmatch(cyzd,&quot;*Z95.9*&quot;) keep if per_vd==1 keep grbm per_vd bysort grbm:keep if _n==1 codebook grbm //1002 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_per_vd.dta&quot; } //4. 脑血管疾病 cere 5457/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen cere=0 replace cere=1 if strmatch(mzzd,&quot;*蛛网膜下腔出血*&quot;) replace cere=1 if strmatch(mzzd,&quot;*蛛网膜下出血*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑内出血*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑干出血*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑室内出血*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑出血*&quot;) replace cere=1 if strmatch(mzzd,&quot;*硬膜下出血*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑膜下出血*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脊椎动脉闭塞*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脊椎动脉狭窄*&quot;) replace cere=1 if strmatch(mzzd,&quot;*基底动脉闭塞*&quot;) replace cere=1 if strmatch(mzzd,&quot;*基底动脉狭窄*&quot;) replace cere=1 if strmatch(mzzd,&quot;*颈动脉闭塞*&quot;) replace cere=1 if strmatch(mzzd,&quot;*颈动脉狭窄*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑前动脉闭塞*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑前动脉狭窄*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑动脉硬化*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑动脉瘤*&quot;) replace cere=1 if strmatch(mzzd,&quot;*血管性脑白质病*&quot;) replace cere=1 if strmatch(mzzd,&quot;*高血压性脑病*&quot;) replace cere=1 if strmatch(mzzd,&quot;*宾斯旺格氏*&quot;) replace cere=1 if strmatch(mzzd,&quot;*动脉硬化性皮层下脑*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑血管病*&quot;) replace cere=1 if strmatch(mzzd,&quot;*大脑淀粉样血管*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑动脉炎*&quot;) replace cere=1 if strmatch(mzzd,&quot;*中风*&quot;) replace cere=1 if strmatch(mzzd,&quot;*卒中*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑供血不足*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑梗*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑动脉综合*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑血管综合*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑血管意外*&quot;) replace cere=1 if strmatch(mzzd,&quot;*腔隙综合*&quot;) replace cere=1 if strmatch(mzzd,&quot;*脑干栓塞综合*&quot;) replace cere=1 if strmatch(mtzd,&quot;*蛛网膜下腔出血*&quot;) replace cere=1 if strmatch(mtzd,&quot;*蛛网膜下出血*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑内出血*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑干出血*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑室内出血*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑出血*&quot;) replace cere=1 if strmatch(mtzd,&quot;*硬膜下出血*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑膜下出血*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脊椎动脉闭塞*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脊椎动脉狭窄*&quot;) replace cere=1 if strmatch(mtzd,&quot;*基底动脉闭塞*&quot;) replace cere=1 if strmatch(mtzd,&quot;*基底动脉狭窄*&quot;) replace cere=1 if strmatch(mtzd,&quot;*颈动脉闭塞*&quot;) replace cere=1 if strmatch(mtzd,&quot;*颈动脉狭窄*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑前动脉闭塞*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑前动脉狭窄*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑动脉硬化*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑动脉瘤*&quot;) replace cere=1 if strmatch(mtzd,&quot;*血管性脑白质病*&quot;) replace cere=1 if strmatch(mtzd,&quot;*高血压性脑病*&quot;) replace cere=1 if strmatch(mtzd,&quot;*宾斯旺格氏*&quot;) replace cere=1 if strmatch(mtzd,&quot;*动脉硬化性皮层下脑*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑血管病*&quot;) replace cere=1 if strmatch(mtzd,&quot;*大脑淀粉样血管*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑动脉炎*&quot;) replace cere=1 if strmatch(mtzd,&quot;*中风*&quot;) replace cere=1 if strmatch(mtzd,&quot;*卒中*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑血管意外*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑供血不足*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑梗*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑动脉综合*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑血管综合*&quot;) replace cere=1 if strmatch(mtzd,&quot;*腔隙综合*&quot;) replace cere=1 if strmatch(mtzd,&quot;*脑干栓塞综合*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*蛛网膜下腔出血*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*蛛网膜下出血*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑内出血*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑干出血*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑室内出血*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑出血*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*硬膜下出血*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑膜下出血*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脊椎动脉闭塞*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脊椎动脉狭窄*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*基底动脉闭塞*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*基底动脉狭窄*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*颈动脉闭塞*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*颈动脉狭窄*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑前动脉闭塞*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑前动脉狭窄*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑动脉硬化*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑动脉瘤*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*血管性脑白质病*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*高血压性脑病*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*宾斯旺格氏*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*动脉硬化性皮层下脑*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑血管病*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*大脑淀粉样血管*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑动脉炎*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*中风*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*卒中*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑供血不足*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑梗*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑动脉综合*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑血管综合*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑血管意外*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*腔隙综合*&quot;) replace cere=1 if strmatch(cyzdmc,&quot;*脑干栓塞综合*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*蛛网膜下腔出血*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*蛛网膜下出血*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑内出血*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑干出血*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑室内出血*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑出血*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*硬膜下出血*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑膜下出血*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脊椎动脉闭塞*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脊椎动脉狭窄*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*基底动脉闭塞*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*基底动脉狭窄*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*颈动脉闭塞*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*颈动脉狭窄*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑前动脉闭塞*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑前动脉狭窄*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑动脉硬化*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑动脉瘤*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*血管性脑白质病*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*高血压性脑病*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*宾斯旺格氏*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*动脉硬化性皮层下脑*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑血管病*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*大脑淀粉样血管*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑动脉炎*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*中风*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*卒中*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑供血不足*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑梗*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑动脉综合*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑血管综合*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑血管意外*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*腔隙综合*&quot;) replace cere=1 if strmatch(cyzdms,&quot;*脑干栓塞综合*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I60*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I61*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I62*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I63*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I64*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I65*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I66*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I67*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I68*&quot;) replace cere=1 if strmatch(cyzd,&quot;*I69*&quot;) replace cere=1 if strmatch(cyzd,&quot;*H34*&quot;) replace cere=1 if strmatch(cyzd,&quot;*G45*&quot;) replace cere=1 if strmatch(cyzd,&quot;*G46*&quot;) keep if cere==1 keep grbm cere bysort grbm:keep if _n==1 codebook grbm //5457 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_cere.dta&quot; } //5. 痴呆 deme 175/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen deme=0 replace deme=1 if strmatch(mzzd,&quot;*痴呆*&quot;) replace deme=1 if strmatch(mzzd,&quot;*阿尔*&quot;) replace deme=0 if strmatch(mzzd,&quot;*谵语*&quot;) replace deme=0 if strmatch(mzzd,&quot;*谵妄*&quot;) replace deme=1 if strmatch(mtzd,&quot;*痴呆*&quot;) replace deme=1 if strmatch(mtzd,&quot;*阿尔*&quot;) replace deme=0 if strmatch(mtzd,&quot;*谵语*&quot;) replace deme=0 if strmatch(mtzd,&quot;*谵妄*&quot;) replace deme=1 if strmatch(cyzdms,&quot;*痴呆*&quot;) replace deme=1 if strmatch(cyzdms,&quot;*阿尔*&quot;) replace deme=0 if strmatch(cyzdms,&quot;*谵语*&quot;) replace deme=0 if strmatch(cyzdms,&quot;*谵妄*&quot;) replace deme=1 if strmatch(cyzdmc,&quot;*痴呆*&quot;) replace deme=1 if strmatch(cyzdmc,&quot;*阿尔*&quot;) replace deme=0 if strmatch(cyzdmc,&quot;*谵语*&quot;) replace deme=0 if strmatch(cyzdmc,&quot;*谵妄*&quot;) replace deme=1 if strmatch(cyzd,&quot;*F00*&quot;) replace deme=1 if strmatch(cyzd,&quot;*F01*&quot;) replace deme=1 if strmatch(cyzd,&quot;*F02*&quot;) replace deme=1 if strmatch(cyzd,&quot;*F03*&quot;) replace deme=1 if strmatch(cyzd,&quot;*F05.1*&quot;) replace deme=1 if strmatch(cyzd,&quot;*G30*&quot;) replace deme=1 if strmatch(cyzd,&quot;*G31.1*&quot;) keep if deme==1 keep grbm deme bysort grbm:keep if _n==1 codebook grbm //175 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_deme.dta&quot; } //6. 慢性肺部疾病 cpul 11577/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen cpul=0 replace cpul=1 if strmatch(mzzd,&quot;*支气管炎*&quot;) replace cpul=1 if strmatch(mzzd,&quot;*肺气肿*&quot;) replace cpul=1 if strmatch(mzzd,&quot;*阻塞性肺*&quot;) replace cpul=1 if strmatch(mzzd,&quot;*哮喘*&quot;) replace cpul=1 if strmatch(mzzd,&quot;*气喘*&quot;) replace cpul=1 if strmatch(mzzd,&quot;*气管扩张*&quot;) replace cpul=1 if strmatch(mzzd,&quot;*肺尘*&quot;) replace cpul=1 if strmatch(mzzd,&quot;*尘肺*&quot;) replace cpul=1 if strmatch(mzzd,&quot;*过敏性肺炎*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*支气管炎*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*肺气肿*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*阻塞性肺*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*哮喘*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*气喘*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*气管扩张*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*肺尘*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*尘肺*&quot;) replace cpul=1 if strmatch(mtzd,&quot;*过敏性肺炎*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*支气管炎*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*肺气肿*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*阻塞性肺*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*哮喘*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*气喘*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*气管扩张*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*肺尘*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*尘肺*&quot;) replace cpul=1 if strmatch(cyzdms,&quot;*过敏性肺炎*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*支气管炎*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*肺气肿*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*阻塞性肺*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*哮喘*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*气喘*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*气管扩张*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*肺尘*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*尘肺*&quot;) replace cpul=1 if strmatch(cyzdmc,&quot;*过敏性肺炎*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*I27.8*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*I27.9*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J40*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J41*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J42*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J43*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J44*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J45*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J46*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J47*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J60*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J61*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J62*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J63*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J64*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J65*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J66*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J67*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J68.4*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J70.1*&quot;) replace cpul=1 if strmatch(cyzd,&quot;*J70.3*&quot;) keep if cpul==1 keep grbm cpul bysort grbm:keep if _n==1 codebook grbm //11577 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_cpul.dta&quot; } //7. 风湿疾病 rheu 437/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen rheu=0 replace rheu=1 if strmatch(mzzd,&quot;*类风湿性关节炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*红斑狼疮*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*皮肌炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*多肌炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*系统性硬化*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*全身性硬化*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*结缔组织*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*风湿性多肌痛*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*多动脉炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*肉芽肿性血管炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*超敏性脉管炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*血小板减少性紫癜*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*肉芽肿*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*主动脉弓综合*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*干燥综合*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*角膜结膜炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*弥漫性筋膜炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*嗜酸性筋膜炎*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*脂膜炎复发*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*家族性韧带松驰*&quot;) replace rheu=1 if strmatch(mzzd,&quot;*血友病性关节病变*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*类风湿性关节炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*红斑狼疮*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*皮肌炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*多肌炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*系统性硬化*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*全身性硬化*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*结缔组织*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*风湿性多肌痛*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*多动脉炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*肉芽肿性血管炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*超敏性脉管炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*血小板减少性紫癜*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*肉芽肿*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*主动脉弓综合*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*干燥综合*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*角膜结膜炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*弥漫性筋膜炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*嗜酸性筋膜炎*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*脂膜炎复发*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*家族性韧带松驰*&quot;) replace rheu=1 if strmatch(mtzd,&quot;*血友病性关节病变*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*类风湿性关节炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*红斑狼疮*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*皮肌炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*多肌炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*系统性硬化*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*全身性硬化*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*结缔组织*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*风湿性多肌痛*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*多动脉炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*肉芽肿性血管炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*超敏性脉管炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*血小板减少性紫癜*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*肉芽肿*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*主动脉弓综合*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*干燥综合*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*角膜结膜炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*弥漫性筋膜炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*嗜酸性筋膜炎*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*脂膜炎复发*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*家族性韧带松驰*&quot;) replace rheu=1 if strmatch(cyzdms,&quot;*血友病性关节病变*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*类风湿性关节炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*红斑狼疮*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*皮肌炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*多肌炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*系统性硬化*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*全身性硬化*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*结缔组织*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*风湿性多肌痛*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*多动脉炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*肉芽肿性血管炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*超敏性脉管炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*血小板减少性紫癜*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*肉芽肿*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*主动脉弓综合*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*干燥综合*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*角膜结膜炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*弥漫性筋膜炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*嗜酸性筋膜炎*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*脂膜炎复发*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*家族性韧带松驰*&quot;) replace rheu=1 if strmatch(cyzdmc,&quot;*血友病性关节病变*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M05*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M06*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M31.5*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M32*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M33*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M34*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M35.1*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M35.3*&quot;) replace rheu=1 if strmatch(cyzd,&quot;*M36.0*&quot;) keep if rheu==1 keep grbm rheu bysort grbm:keep if _n==1 codebook grbm //437 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_rheu.dta&quot; } //8. 消化性溃疡 ulcer 1538/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen ulcer=0 replace ulcer=1 if strmatch(mzzd,&quot;*食管溃疡*&quot;) replace ulcer=1 if strmatch(mzzd,&quot;*胃溃疡*&quot;) replace ulcer=1 if strmatch(mzzd,&quot;*十二指肠溃疡*&quot;) replace ulcer=1 if strmatch(mzzd,&quot;*消化性溃疡*&quot;) replace ulcer=1 if strmatch(mtzd,&quot;*食管溃疡*&quot;) replace ulcer=1 if strmatch(mtzd,&quot;*胃溃疡*&quot;) replace ulcer=1 if strmatch(mtzd,&quot;*十二指肠溃疡*&quot;) replace ulcer=1 if strmatch(mtzd,&quot;*消化性溃疡*&quot;) replace ulcer=1 if strmatch(cyzdms,&quot;*食管溃疡*&quot;) replace ulcer=1 if strmatch(cyzdms,&quot;*胃溃疡*&quot;) replace ulcer=1 if strmatch(cyzdms,&quot;*十二指肠溃疡*&quot;) replace ulcer=1 if strmatch(cyzdms,&quot;*消化性溃疡*&quot;) replace ulcer=1 if strmatch(cyzdmc,&quot;*食管溃疡*&quot;) replace ulcer=1 if strmatch(cyzdmc,&quot;*胃溃疡*&quot;) replace ulcer=1 if strmatch(cyzdmc,&quot;*十二指肠溃疡*&quot;) replace ulcer=1 if strmatch(cyzdmc,&quot;*消化性溃疡*&quot;) replace ulcer=1 if strmatch(cyzd,&quot;*K25*&quot;) replace ulcer=1 if strmatch(cyzd,&quot;*K26*&quot;) replace ulcer=1 if strmatch(cyzd,&quot;*K27*&quot;) replace ulcer=1 if strmatch(cyzd,&quot;*K28*&quot;) keep if ulcer==1 keep grbm ulcer bysort grbm:keep if _n==1 codebook grbm //1538 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_ulcer.dta&quot; //基线合并症 use &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_ulcer.dta&quot; merge 1:1 grbm using &quot;H:\\COPD\\ppl_explore\\2017-2018_inclusion_6629_grbm.dta&quot; keep if _merge==3 drop _merge codebook grbm //729 } //9. 轻度肝病 mliver 1189/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen mliver=0 replace mliver=1 if strmatch(mzzd,&quot;*慢性肝炎*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*酒精肝*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*酒精性肝*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*脂肪肝*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*毒性肝病*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*肝纤维*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*肝硬化*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*肝紫癜*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*肝囊肿*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*肝下垂*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*病毒性肝炎乙型*&quot;)|strmatch(mzzd,&quot;*乙肝*&quot;)|strmatch(mzzd,&quot;*乙型病毒性*&quot;)|strmatch(mzzd,&quot;*乙型肝炎*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*病毒性肝炎丙型*&quot;)|strmatch(mzzd,&quot;*丙肝*&quot;)|strmatch(mzzd,&quot;*丙型病毒性*&quot;)|strmatch(mzzd,&quot;*丙型肝炎*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*病毒性肝炎甲型*&quot;)|strmatch(mzzd,&quot;*甲肝*&quot;)|strmatch(mzzd,&quot;*甲型病毒性*&quot;)|strmatch(mzzd,&quot;*甲型肝炎*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*病毒性肝炎*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*肝炎*&quot;)|strmatch(mzzd,&quot;*慢肝*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*酒精性肝*&quot;)|strmatch(mzzd,&quot;*酒精肝*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*肝硬化*&quot;)|strmatch(mzzd,&quot;*肝硬变*&quot;)|strmatch(mzzd,&quot;*自免肝*&quot;) replace mliver=1 if strmatch(mzzd,&quot;*脂肪肝*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*慢性肝炎*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*酒精肝*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*酒精性肝*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*脂肪肝*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*毒性肝病*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*肝纤维*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*肝硬化*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*肝紫癜*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*肝囊肿*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*肝下垂*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*病毒性肝炎乙型*&quot;)|strmatch(mtzd,&quot;*乙肝*&quot;)|strmatch(mtzd,&quot;*乙型病毒性*&quot;)|strmatch(mtzd,&quot;*乙型肝炎*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*病毒性肝炎丙型*&quot;)|strmatch(mtzd,&quot;*丙肝*&quot;)|strmatch(mtzd,&quot;*丙型病毒性*&quot;)|strmatch(mtzd,&quot;*丙型肝炎*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*病毒性肝炎甲型*&quot;)|strmatch(mtzd,&quot;*甲肝*&quot;)|strmatch(mtzd,&quot;*甲型病毒性*&quot;)|strmatch(mtzd,&quot;*甲型肝炎*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*病毒性肝炎*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*肝炎*&quot;)|strmatch(mtzd,&quot;*慢肝*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*酒精性肝*&quot;)|strmatch(mtzd,&quot;*酒精肝*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*肝硬化*&quot;)|strmatch(mtzd,&quot;*肝硬变*&quot;)|strmatch(mtzd,&quot;*自免肝*&quot;) replace mliver=1 if strmatch(mtzd,&quot;*脂肪肝*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*慢性肝炎*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*酒精肝*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*酒精性肝*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*脂肪肝*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*毒性肝病*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*肝纤维*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*肝硬化*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*肝紫癜*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*肝囊肿*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*肝下垂*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*病毒性肝炎乙型*&quot;)|strmatch(cyzdms,&quot;*乙肝*&quot;)|strmatch(cyzdms,&quot;*乙型病毒性*&quot;)|strmatch(cyzdms,&quot;*乙型肝炎*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*病毒性肝炎丙型*&quot;)|strmatch(cyzdms,&quot;*丙肝*&quot;)|strmatch(cyzdms,&quot;*丙型病毒性*&quot;)|strmatch(cyzdms,&quot;*丙型肝炎*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*病毒性肝炎甲型*&quot;)|strmatch(cyzdms,&quot;*甲肝*&quot;)|strmatch(cyzdms,&quot;*甲型病毒性*&quot;)|strmatch(cyzdms,&quot;*甲型肝炎*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*病毒性肝炎*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*肝炎*&quot;)|strmatch(cyzdms,&quot;*慢肝*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*酒精性肝*&quot;)|strmatch(cyzdms,&quot;*酒精肝*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*肝硬化*&quot;)|strmatch(cyzdms,&quot;*肝硬变*&quot;)|strmatch(cyzdms,&quot;*自免肝*&quot;) replace mliver=1 if strmatch(cyzdms,&quot;*脂肪肝*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*慢性肝炎*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*酒精肝*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*酒精性肝*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*脂肪肝*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*毒性肝病*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*肝纤维*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*肝硬化*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*肝紫癜*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*肝囊肿*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*肝下垂*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*病毒性肝炎乙型*&quot;)|strmatch(cyzdmc,&quot;*乙肝*&quot;)|strmatch(cyzdmc,&quot;*乙型病毒性*&quot;)|strmatch(cyzdmc,&quot;*乙型肝炎*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*病毒性肝炎丙型*&quot;)|strmatch(cyzdmc,&quot;*丙肝*&quot;)|strmatch(cyzdmc,&quot;*丙型病毒性*&quot;)|strmatch(cyzdmc,&quot;*丙型肝炎*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*病毒性肝炎甲型*&quot;)|strmatch(cyzdmc,&quot;*甲肝*&quot;)|strmatch(cyzdmc,&quot;*甲型病毒性*&quot;)|strmatch(cyzdmc,&quot;*甲型肝炎*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*病毒性肝炎*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*肝炎*&quot;)|strmatch(cyzdmc,&quot;*慢肝*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*酒精性肝*&quot;)|strmatch(cyzdmc,&quot;*酒精肝*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*肝硬化*&quot;)|strmatch(cyzdmc,&quot;*肝硬变*&quot;)|strmatch(cyzdmc,&quot;*自免肝*&quot;) replace mliver=1 if strmatch(cyzdmc,&quot;*脂肪肝*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*B18*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K70.0*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K70.1*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K70.2*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K70.3*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K70.9*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K71.3*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K71.4*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K71.5*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K71.7*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K73*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K74*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K76.0*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K76.2*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K76.3*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K76.4*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K76.8*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*K76.9*&quot;) replace mliver=1 if strmatch(cyzd,&quot;*Z94.4*&quot;) replace mliver=0 if strmatch(cyzdms,&quot;*乙肝病毒携带者*&quot;)|strmatch(mzzd,&quot;*乙肝病毒携带者*&quot;)|strmatch(mtzd,&quot;*乙肝病毒携带者*&quot;) keep if mliver==1 keep grbm mliver bysort grbm:keep if _n==1 codebook grbm //1189 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_mliver.dta&quot; } //10. 糖尿病伴有慢性并发症 dia_sev 2174/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen dia=0 //mz replace dia=1 if strmatch(mzzd,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(mzzd,&quot;*糖尿*&quot;) replace dia=1 if strmatch(mzzd,&quot;*胰岛素依赖*&quot;) replace dia=1 if strmatch(mzzd,&quot;*T1D*&quot;) replace dia=1 if strmatch(mzzd,&quot;*t1d*&quot;) replace dia=1 if strmatch(mzzd,&quot;*T2D*&quot;) replace dia=1 if strmatch(mzzd,&quot;*t2d*&quot;) //mt replace dia=1 if strmatch(mtzd,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(mtzd,&quot;*糖尿*&quot;) replace dia=1 if strmatch(mtzd,&quot;*胰岛素依赖*&quot;) replace dia=1 if strmatch(mtzd,&quot;*T1D*&quot;) replace dia=1 if strmatch(mtzd,&quot;*t1d*&quot;) replace dia=1 if strmatch(mtzd,&quot;*T2D*&quot;) replace dia=1 if strmatch(mtzd,&quot;*t2d*&quot;) replace dia=1 if strmatch(mtbz,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(mtbz,&quot;4&quot;) //zy replace dia=1 if strmatch(cyzdmc,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*糖尿*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*胰岛素依赖*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*T1D*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*t1d*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*T2D*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*t2d*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*糖尿*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*胰岛素依赖*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*T1D*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*t1d*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*T2D*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*t2d*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E10*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E11*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E12*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E13*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E14*&quot;) keep if dia==1 codebook grbm //4395 gen dia_sev=0 {//*************肾 //zy //1、糖尿病肾病 replace dia_sev=1 if strmatch(cyzd,&quot;*E10.2*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E11.2*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E12.2*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E13.2*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E14.2*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*糖尿病*肾病*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*糖尿病*肾*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*糖肾病*&quot;) //2、慢性肾小球肾炎 replace dia_sev=1 if strmatch(cyzd,&quot;*N03*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*慢性肾炎*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*隐匿性肾小球肾炎*&quot;) //3、肾病综合征 replace dia_sev=1 if strmatch(cyzd,&quot;*N04*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*肾病*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*肾功能不全*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*肾变病*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*急性肾病*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*急性肾功能不全*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*急性肾变病*&quot;) //4、肾衰竭 replace dia_sev=1 if strmatch(cyzd,&quot;*N18*&quot;) | strmatch(cyzd,&quot;*N19*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*肾衰*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*肾功能衰竭*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*尿毒症*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*急性肾衰*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*急性肾功能衰竭*&quot;) //5、透析 replace dia_sev=1 if strmatch(cyzd,&quot;*Z49*&quot;) | strmatch(cyzd,&quot;*Z99.2*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*透析*&quot;) //mz //1、糖尿病肾病 replace dia_sev=1 if strmatch(mzzd,&quot;*E10.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E11.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E12.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E13.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E14.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*糖尿病*肾病*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*糖尿病*肾*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*糖肾病*&quot;) //2、慢性肾小球肾炎 replace dia_sev=1 if strmatch(mzzd,&quot;*N03*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*慢性肾炎*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*隐匿性肾小球肾炎*&quot;) //3、肾病综合征 replace dia_sev=1 if strmatch(mzzd,&quot;*N04*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*肾病*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*肾功能不全*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*肾变病*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*急性肾病*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*急性肾功能不全*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*急性肾变病*&quot;) //4、肾衰竭 replace dia_sev=1 if strmatch(mzzd,&quot;*N18*&quot;) | strmatch(mzzd,&quot;*N19*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*肾衰*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*肾功能衰竭*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*尿毒症*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*急性肾衰*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*急性肾功能衰竭*&quot;) //5、透析 replace dia_sev=1 if strmatch(mzzd,&quot;*Z49*&quot;) | strmatch(mzzd,&quot;*Z99.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*透析*&quot;) //mt //1、糖尿病肾病 replace dia_sev=1 if strmatch(mtzd,&quot;*E10.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E11.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E12.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E13.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E14.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*糖尿病*肾病*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*糖尿病*肾*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*糖肾病*&quot;) //2、慢性肾小球肾炎 replace dia_sev=1 if strmatch(mtzd,&quot;*N03*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*慢性肾炎*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*隐匿性肾小球肾炎*&quot;) //3、肾病综合征 replace dia_sev=1 if strmatch(mtzd,&quot;*N04*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*肾病*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*肾功能不全*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*肾变病*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*急性肾病*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*急性肾功能不全*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*急性肾变病*&quot;) //4、肾衰竭 replace dia_sev=1 if strmatch(mtzd,&quot;*N18*&quot;) | strmatch(mtzd,&quot;*N19*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*肾衰*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*肾功能衰竭*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*尿毒症*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*急性肾衰*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*急性肾功能衰竭*&quot;) //5、透析 replace dia_sev=1 if strmatch(mtzd,&quot;*Z49*&quot;) | strmatch(mtzd,&quot;*Z99.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*透析*&quot;) } {//*************眼部 replace dia_sev=1 if strmatch(cyzd,&quot;*E10.3*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E11.3*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E12.3*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E13.3*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E14.3*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H33*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H35.0*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H35.2*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H35.3*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H35.8*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H35.9*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H36.0*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H43.1*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H54*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*眼的并发症*&quot;) | strmatch(cyzdms,&quot;*眼的并发症*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*眼病*&quot;) | strmatch(cyzdms,&quot;*眼病*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*视网膜*&quot;) | strmatch(cyzdms,&quot;*视网膜*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*眼底*&quot;) | strmatch(cyzdms,&quot;*眼底*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*黄斑*&quot;) | strmatch(cyzdms,&quot;*黄斑*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*玻璃体*&quot;) | strmatch(cyzdms,&quot;*玻璃体*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*玻血*&quot;) | strmatch(cyzdms,&quot;*玻血*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*网脱*&quot;) | strmatch(cyzdms,&quot;*网脱*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*失明*&quot;) | strmatch(cyzdms,&quot;*失明*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*弱视*&quot;) | strmatch(cyzdms,&quot;*弱视*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*视力丧失*&quot;) | strmatch(cyzdms,&quot;*视力丧失*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E10.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E11.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E12.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E13.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E14.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H33*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H35.0*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H35.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H35.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H35.8*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H35.9*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H36.0*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H43.1*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H54*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*眼的并发症*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*眼病*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*视网膜*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*眼底*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*黄斑*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*玻璃体*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*玻血*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*网脱*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*失明*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*弱视*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*视力丧失*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E10.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E11.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E12.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E13.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E14.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H33*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H35.0*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H35.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H35.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H35.8*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H35.9*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H36.0*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H43.1*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H54*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*眼的并发症*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*眼病*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*视网膜*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*眼底*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*黄斑*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*玻璃体*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*玻血*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*网脱*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*失明*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*弱视*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*视力丧失*&quot;) } {//*************神经病变 replace dia_sev=1 if strmatch(cyzdmc,&quot;*神经病*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*神经病*&quot;) //1、糖尿病神经病变 replace dia_sev=1 if strmatch(cyzd,&quot;*E10.4*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E11.4*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E12.4*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E13.4*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E14.4*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*G60.9*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*G63.2*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*糖尿病*神经*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*糖尿病*神经*&quot;) //单*神经 replace dia_sev=1 if strmatch(cyzd,&quot;*G56*&quot;) | strmatch(cyzd,&quot;*G57*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*神经病变*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*尺神经损害*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*腕管综合*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*神经血管病变*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*神经病变*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*尺神经损害*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*腕管综合*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*神经血管病变*&quot;) //其他 replace dia_sev=1 if strmatch(cyzd,&quot;*I95.1*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*直立性低血压*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*直立性低血压*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*K59.1*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*功能性腹泻*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*功能性腹泻*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*N31.9*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*H49*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*神经麻痹*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*麻痹性斜视*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*眼肌麻痹*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*重症肌无力*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*神经麻痹*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*麻痹性斜视*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*眼肌麻痹*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*重症肌无力*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*G73.3*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*肌无力*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*肌无力*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*M14.6*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*夏科关节病*&quot;) | strmatch(cyzdmc,&quot;*夏科病*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*夏科关节病*&quot;) | strmatch(cyzdms,&quot;*夏科病*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*S04*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*颅神经麻痹*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*颅神经麻痹*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*G90.0*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*G90.8*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*G90.9*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*神经病*&quot;) //1、糖尿病神经病变 replace dia_sev=1 if strmatch(mzzd,&quot;*E10.4*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E11.4*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E12.4*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E13.4*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E14.4*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*G60.9*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*G63.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*糖尿病*神经*&quot;) //单*神经 replace dia_sev=1 if strmatch(mzzd,&quot;*G56*&quot;) | strmatch(mzzd,&quot;*G57*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*神经病变*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*尺神经损害*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*腕管综合*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*神经血管病变*&quot;) //其他 replace dia_sev=1 if strmatch(mzzd,&quot;*I95.1*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*直立性低血压*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*K59.1*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*功能性腹泻*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*N31.9*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*H49*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*神经麻痹*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*麻痹性斜视*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*眼肌麻痹*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*重症肌无力*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*G73.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*肌无力*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*M14.6*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*夏科关节病*&quot;) | strmatch(mzzd,&quot;*夏科病*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*S04*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*颅神经麻痹*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*G90.0*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*G90.8*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*G90.9*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*神经病*&quot;) //1、糖尿病神经病变 replace dia_sev=1 if strmatch(mtzd,&quot;*E10.4*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E11.4*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E12.4*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E13.4*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E14.4*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*G60.9*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*G63.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*糖尿病*神经*&quot;) //单*神经 replace dia_sev=1 if strmatch(mtzd,&quot;*G56*&quot;) | strmatch(mtzd,&quot;*G57*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*神经病变*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*尺神经损害*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*腕管综合*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*神经血管病变*&quot;) //其他 replace dia_sev=1 if strmatch(mtzd,&quot;*I95.1*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*直立性低血压*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*K59.1*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*功能性腹泻*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*N31.9*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*H49*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*神经麻痹*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*麻痹性斜视*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*眼肌麻痹*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*重症肌无力*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*G73.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*肌无力*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*M14.6*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*夏科关节病*&quot;) | strmatch(mtzd,&quot;*夏科病*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*S04*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*颅神经麻痹*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*G90.0*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*G90.8*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*G90.9*&quot;) } {//*************外周 replace dia_sev=1 if strmatch(cyzd,&quot;*E10.5*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E11.5*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E12.5*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E13.5*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*E14.5*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*周围循环并发症*&quot;) | strmatch(cyzdms,&quot;*周围循环并发症*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*外周动脉*&quot;) | strmatch(cyzdms,&quot;*外周动脉*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*外周血管*&quot;) | strmatch(cyzdms,&quot;*外周血管*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*周围血管*&quot;) | strmatch(cyzdms,&quot;*周围血管*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*周围动脉*&quot;) | strmatch(cyzdms,&quot;*周围动脉*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢血管*&quot;) | strmatch(cyzdms,&quot;*下肢血管*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢动脉*&quot;) | strmatch(cyzdms,&quot;*下肢动脉*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢闭塞*&quot;) | strmatch(cyzdms,&quot;*下肢闭塞*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢颈动脉*&quot;) | strmatch(cyzdms,&quot;*下肢颈动脉*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢双颈动脉*&quot;) | strmatch(cyzdms,&quot;*下肢双颈动脉*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢及颈动脉*&quot;) | strmatch(cyzdms,&quot;*下肢及颈动脉*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢及双颈动脉*&quot;) | strmatch(cyzdms,&quot;*下肢及双颈动脉*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*周围循环障碍*&quot;) | strmatch(cyzdms,&quot;*周围循环障碍*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*I70.2*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*闭塞性动脉硬化*&quot;) | strmatch(cyzdms,&quot;*闭塞性动脉硬化*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*四肢动脉*&quot;) | strmatch(cyzdms,&quot;*四肢动脉*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*I70.8*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*I70.9*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*血栓闭塞性脉管炎*&quot;) | strmatch(cyzdms,&quot;*血栓闭塞性脉管炎*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*I72.4*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*下肢动脉瘤*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢动脉瘤*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*I73*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢脉管炎*&quot;) | strmatch(cyzdms,&quot;*下肢脉管炎*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*闭塞性血栓性脉管炎*&quot;) | strmatch(cyzdms,&quot;*闭塞性血栓性脉管炎*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢脉管炎*&quot;) | strmatch(cyzdms,&quot;*下肢脉管炎*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*闭塞性血栓性脉管炎*&quot;) | strmatch(cyzdms,&quot;*闭塞性血栓性脉管炎*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*I74.3*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢急性动脉*&quot;) | strmatch(cyzdms,&quot;*下肢急性动脉*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢急性缺血*&quot;) | strmatch(cyzdms,&quot;*下肢急性缺血*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢血栓*&quot;) | strmatch(cyzdms,&quot;*下肢血栓*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*I74.5*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*髂动脉*&quot;) | strmatch(cyzdms,&quot;*髂动脉*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*I79.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E10.5*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E11.5*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E12.5*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E13.5*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*E14.5*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*周围循环并发症*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*外周动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*外周血管*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*周围血管*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*周围动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢血管*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢闭塞*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢颈动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢双颈动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢及颈动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢及双颈动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*周围循环障碍*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*I70.2*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*闭塞性动脉硬化*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*四肢动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*I70.8*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*I70.9*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*血栓闭塞性脉管炎*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*I72.4*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢动脉瘤*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*I73*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢脉管炎*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*闭塞性血栓性脉管炎*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢脉管炎*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*闭塞性血栓性脉管炎*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*I74.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢急性动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢急性缺血*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢血栓*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*I74.5*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*髂动脉*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*I79.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E10.5*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E11.5*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E12.5*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E13.5*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*E14.5*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*周围循环并发症*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*外周动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*外周血管*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*周围血管*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*周围动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢血管*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢闭塞*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢颈动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢双颈动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢及颈动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢及双颈动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*周围循环障碍*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*I70.2*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*闭塞性动脉硬化*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*四肢动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*I70.8*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*I70.9*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*血栓闭塞性脉管炎*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*I72.4*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢动脉瘤*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*I73*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢脉管炎*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*闭塞性血栓性脉管炎*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢脉管炎*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*闭塞性血栓性脉管炎*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*I74.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢急性动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢急性缺血*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢血栓*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*I74.5*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*髂动脉*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*I79.2*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*S91.3*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*截肢*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*截肢*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*足病*&quot;) | strmatch(cyzdmc,&quot;*病足*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*足病*&quot;) | strmatch(cyzdms,&quot;*病足*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*病足癣*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*病足扭伤*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*病足癣*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*病足扭伤*&quot;) //1、坏疽 replace dia_sev=1 if strmatch(cyzd,&quot;*A48.0*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*R02*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*足*坏疽*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*足*坏疽*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢坏疽*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*下肢坏疽*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*糖尿病坏疽*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*糖尿病坏疽*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*糖尿病性坏疽*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*糖尿病性坏疽*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*不伴有梗阻或坏疽*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*不伴有梗阻或坏疽*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*坏疽性胆囊炎*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*坏疽性胆囊炎*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*坏疽性阑尾炎*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*坏疽性阑尾炎*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*坏疽穿孔性阑尾炎*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*坏疽穿孔性阑尾炎*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*阑尾坏疽*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*阑尾坏疽*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*胆囊坏疽*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*胆囊坏疽*&quot;) replace dia_sev=0 if strmatch(cyzdmc,&quot;*不伴有坏疽*&quot;) replace dia_sev=0 if strmatch(cyzdms,&quot;*不伴有坏疽*&quot;) //2、下肢溃疡 replace dia_sev=1 if strmatch(cyzd,&quot;*L98.4*&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*L97*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*足溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*膝部溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢慢性*溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢感染性性*溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢*合并溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*小腿*溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*膝部慢性*溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*下肢溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*足溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*膝部溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*下肢慢性*溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*下肢感染性性*溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*下肢*合并溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*小腿*溃疡*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*膝部慢性*溃疡*&quot;) //3、足、脚、踝截肢 replace dia_sev=1 if strmatch(cyzd,&quot;*S98*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*足*截肢*&quot;) | strmatch(cyzdmc,&quot;*足*切断*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*脚*截肢*&quot;) | strmatch(cyzdmc,&quot;*脚*切断*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*踝*截肢*&quot;) | strmatch(cyzdmc,&quot;*踝*切断*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*足*截肢*&quot;) | strmatch(cyzdms,&quot;*足*切断*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*脚*截肢*&quot;) | strmatch(cyzdms,&quot;*脚*切断*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*踝*截肢*&quot;) | strmatch(cyzdms,&quot;*踝*切断*&quot;) //4、下肢截肢 replace dia_sev=1 if strmatch(cyzd,&quot;*Y83.5 *&quot;) replace dia_sev=1 if strmatch(cyzd,&quot;*Z89*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*下肢*截肢*&quot;) | strmatch(cyzdmc,&quot;*下肢*切断*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*膝*截肢*&quot;) | strmatch(cyzdmc,&quot;*膝*切断*&quot;) replace dia_sev=1 if strmatch(cyzdmc,&quot;*趾*截肢*&quot;) | strmatch(cyzdmc,&quot;*趾*切断*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*下肢*截肢*&quot;) | strmatch(cyzdms,&quot;*下肢*切断*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*膝*截肢*&quot;) | strmatch(cyzdms,&quot;*膝*切断*&quot;) replace dia_sev=1 if strmatch(cyzdms,&quot;*趾*截肢*&quot;) | strmatch(cyzdms,&quot;*趾*切断*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*S91.3*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*截肢*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*足病*&quot;) | strmatch(mzzd,&quot;*病足*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*病足癣*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*病足扭伤*&quot;) //1、坏疽 replace dia_sev=1 if strmatch(mzzd,&quot;*A48.0*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*R02*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*足*坏疽*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢坏疽*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*糖尿病坏疽*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*糖尿病性坏疽*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*不伴有梗阻或坏疽*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*坏疽性胆囊炎*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*坏疽性阑尾炎*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*坏疽穿孔性阑尾炎*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*阑尾坏疽*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*胆囊坏疽*&quot;) replace dia_sev=0 if strmatch(mzzd,&quot;*不伴有坏疽*&quot;) //2、下肢溃疡 replace dia_sev=1 if strmatch(mzzd,&quot;*L98.4*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*L97*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢溃疡*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*足溃疡*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*膝部溃疡*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢慢性*溃疡*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢感染性性*溃疡*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢*合并溃疡*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*小腿*溃疡*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*膝部慢性*溃疡*&quot;) //3、足、脚、踝截肢 replace dia_sev=1 if strmatch(mzzd,&quot;*S98*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*足*截肢*&quot;) | strmatch(mzzd,&quot;*足*切断*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*脚*截肢*&quot;) | strmatch(mzzd,&quot;*脚*切断*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*踝*截肢*&quot;) | strmatch(mzzd,&quot;*踝*切断*&quot;) //4、下肢截肢 replace dia_sev=1 if strmatch(mzzd,&quot;*Y83.5 *&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*Z89*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*下肢*截肢*&quot;) | strmatch(mzzd,&quot;*下肢*切断*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*膝*截肢*&quot;) | strmatch(mzzd,&quot;*膝*切断*&quot;) replace dia_sev=1 if strmatch(mzzd,&quot;*趾*截肢*&quot;) | strmatch(mzzd,&quot;*趾*切断*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*S91.3*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*截肢*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*足病*&quot;) | strmatch(mtzd,&quot;*病足*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*病足癣*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*病足扭伤*&quot;) //1、坏疽 replace dia_sev=1 if strmatch(mtzd,&quot;*A48.0*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*R02*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*足*坏疽*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢坏疽*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*糖尿病坏疽*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*糖尿病性坏疽*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*不伴有梗阻或坏疽*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*坏疽性胆囊炎*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*坏疽性阑尾炎*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*坏疽穿孔性阑尾炎*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*阑尾坏疽*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*胆囊坏疽*&quot;) replace dia_sev=0 if strmatch(mtzd,&quot;*不伴有坏疽*&quot;) //2、下肢溃疡 replace dia_sev=1 if strmatch(mtzd,&quot;*L98.4*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*L97*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢溃疡*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*足溃疡*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*膝部溃疡*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢慢性*溃疡*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢感染性性*溃疡*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢*合并溃疡*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*小腿*溃疡*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*膝部慢性*溃疡*&quot;) //3、足、脚、踝截肢 replace dia_sev=1 if strmatch(mtzd,&quot;*S98*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*足*截肢*&quot;) | strmatch(mtzd,&quot;*足*切断*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*脚*截肢*&quot;) | strmatch(mtzd,&quot;*脚*切断*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*踝*截肢*&quot;) | strmatch(mtzd,&quot;*踝*切断*&quot;) //4、下肢截肢 replace dia_sev=1 if strmatch(mtzd,&quot;*Y83.5 *&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*Z89*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*下肢*截肢*&quot;) | strmatch(mtzd,&quot;*下肢*切断*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*膝*截肢*&quot;) | strmatch(mtzd,&quot;*膝*切断*&quot;) replace dia_sev=1 if strmatch(mtzd,&quot;*趾*截肢*&quot;) | strmatch(mtzd,&quot;*趾*切断*&quot;) } keep if dia_sev==1 keep grbm dia_sev bysort grbm:keep if _n==1 codebook grbm //2174 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_dia_sev.dta&quot; } //11. 糖尿病无慢并发症 dia 4393/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen dia=0 //mz replace dia=1 if strmatch(mzzd,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(mzzd,&quot;*糖尿*&quot;) replace dia=1 if strmatch(mzzd,&quot;*胰岛素依赖*&quot;) replace dia=1 if strmatch(mzzd,&quot;*T1D*&quot;) replace dia=1 if strmatch(mzzd,&quot;*t1d*&quot;) replace dia=1 if strmatch(mzzd,&quot;*T2D*&quot;) replace dia=1 if strmatch(mzzd,&quot;*t2d*&quot;) //mt replace dia=1 if strmatch(mtzd,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(mtzd,&quot;*糖尿*&quot;) replace dia=1 if strmatch(mtzd,&quot;*胰岛素依赖*&quot;) replace dia=1 if strmatch(mtzd,&quot;*T1D*&quot;) replace dia=1 if strmatch(mtzd,&quot;*t1d*&quot;) replace dia=1 if strmatch(mtzd,&quot;*T2D*&quot;) replace dia=1 if strmatch(mtzd,&quot;*t2d*&quot;) //zy replace dia=1 if strmatch(cyzdmc,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*糖尿*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*胰岛素依赖*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*T1D*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*t1d*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*T2D*&quot;) replace dia=1 if strmatch(cyzdmc,&quot;*t2d*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*糖尿病*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*糖尿*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*胰岛素依赖*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*T1D*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*t1d*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*T2D*&quot;) replace dia=1 if strmatch(cyzdms,&quot;*t2d*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E10*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E11*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E12*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E13*&quot;) replace dia=1 if strmatch(cyzd,&quot;*E14*&quot;) keep if dia==1 merge m:1 grbm using &quot;H:\\AD\\baseline characteristic\\CCI\\CCI_dia_sev.dta&quot; keep if _merge==1 drop _merge keep grbm dia bysort grbm:keep if _n==1 codebook grbm //4393 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_dia_no sev.dta&quot; } //12. 偏瘫 hemi 766/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen hemi=0 replace hemi=1 if strmatch(mzzd,&quot;*偏瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*痉挛性截瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*松驰性截瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*松驰性四肢瘫痪*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*痉挛性截瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*痉挛性四肢截瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*双侧瘫痪*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*双瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*单瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*半身不遂*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*截瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*瘫痪*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*单瘫*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*马尾综合*&quot;) replace hemi=1 if strmatch(mzzd,&quot;*瘫痪综合*&quot;) replace hemi=1 if strmatch(mtbz,&quot;8&quot;) replace hemi=1 if strmatch(mtbz,&quot;*偏瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*偏瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*痉挛性截瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*松驰性截瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*松驰性四肢瘫痪*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*痉挛性截瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*痉挛性四肢截瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*双侧瘫痪*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*双瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*单瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*半身不遂*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*截瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*瘫痪*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*单瘫*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*马尾综合*&quot;) replace hemi=1 if strmatch(mtzd,&quot;*瘫痪综合*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*偏瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*痉挛性截瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*松驰性截瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*松驰性四肢瘫痪*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*痉挛性截瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*痉挛性四肢截瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*双侧瘫痪*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*双瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*单瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*半身不遂*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*截瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*瘫痪*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*单瘫*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*马尾综合*&quot;) replace hemi=1 if strmatch(cyzdms,&quot;*瘫痪综合*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*偏瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*痉挛性截瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*松驰性截瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*松驰性四肢瘫痪*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*痉挛性截瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*痉挛性四肢截瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*双侧瘫痪*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*双瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*单瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*半身不遂*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*截瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*瘫痪*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*单瘫*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*马尾综合*&quot;) replace hemi=1 if strmatch(cyzdmc,&quot;*瘫痪综合*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G04.1*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G11.4*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G80.1*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G80.2*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G81*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G82*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G83.0*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G83.1*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G83.2*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G83.3*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G83.4*&quot;) replace hemi=1 if strmatch(cyzd,&quot;*G83.9*&quot;) keep if hemi==1 keep grbm hemi bysort grbm:keep if _n==1 codebook grbm //766 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_hemi.dta&quot; } //13. 肾病 renal 2702/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen renal=0 replace renal=1 if strmatch(cyzd,&quot;*I12.0*&quot;) replace renal=1 if strmatch(cyzd,&quot;*I13.1*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N03.2*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N03.3*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N03.4*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N03.5*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N03.6*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N03.7*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N05.2*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N05.3*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N05.4*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N05.5*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N05.6*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N05.7*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N18*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N19*&quot;) replace renal=1 if strmatch(cyzd,&quot;*N25.0*&quot;) replace renal=1 if strmatch(cyzd,&quot;*Z49.0*&quot;) replace renal=1 if strmatch(cyzd,&quot;*Z49.1*&quot;) replace renal=1 if strmatch(cyzd,&quot;*Z49.2*&quot;) replace renal=1 if strmatch(cyzd,&quot;*Z94.0*&quot;) replace renal=1 if strmatch(cyzd,&quot;*Z99.2*&quot;) //急性肾小球肾炎 replace renal=1 if strmatch(cyzdmc,&quot;*急性肾炎综合*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*急性肾小球肾炎*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*急性肾盂肾炎*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*急性链感后肾小球肾炎*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*急性肾炎综合*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*急性肾小球肾炎*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*急性肾盂肾炎*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*急性链感后肾小球肾炎*&quot;) //慢性肾小球肾炎 replace renal=1 if strmatch(cyzdmc,&quot;*慢性肾炎*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*隐匿性肾小球肾炎*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*慢性肾炎*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*隐匿性肾小球肾炎*&quot;) //肾病综合征 replace renal=1 if strmatch(cyzdmc,&quot;*肾病*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*肾功能不全*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*肾变病*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾病*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾功能不全*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾变病*&quot;) //肾衰竭 replace renal=1 if strmatch(cyzdmc,&quot;*肾衰*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*肾功能衰竭*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*尿毒症*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾衰*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾功能衰竭*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*尿毒症*&quot;) //肾功能受损 replace renal=1 if strmatch(cyzdmc,&quot;*肾功能受损*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾功能受损*&quot;) //肾硬化 replace renal=1 if strmatch(cyzdmc,&quot;*肾挛缩*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*肾萎缩*&quot;) replace renal=1 if strmatch(cyzdmc,&quot;*肾硬化*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾挛缩*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾萎缩*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*肾硬化*&quot;) //肾功能不全 //透析 replace renal=1 if strmatch(cyzdmc,&quot;*透析*&quot;) replace renal=1 if strmatch(cyzdms,&quot;*透析*&quot;) //糖尿病肾病 //急性肾小球肾炎 replace renal=1 if strmatch(mzzd,&quot;*急性肾炎综合*&quot;) replace renal=1 if strmatch(mzzd,&quot;*急性肾小球肾炎*&quot;) replace renal=1 if strmatch(mzzd,&quot;*急性肾盂肾炎*&quot;) replace renal=1 if strmatch(mzzd,&quot;*急性链感后肾小球肾炎*&quot;) //慢性肾小球肾炎 replace renal=1 if strmatch(mzzd,&quot;*慢性肾炎*&quot;) replace renal=1 if strmatch(mzzd,&quot;*隐匿性肾小球肾炎*&quot;) //肾病综合征 replace renal=1 if strmatch(mzzd,&quot;*肾病*&quot;) replace renal=1 if strmatch(mzzd,&quot;*肾功能不全*&quot;) replace renal=1 if strmatch(mzzd,&quot;*肾变病*&quot;) //肾衰竭 replace renal=1 if strmatch(mzzd,&quot;*肾衰*&quot;) replace renal=1 if strmatch(mzzd,&quot;*肾功能衰竭*&quot;) replace renal=1 if strmatch(mzzd,&quot;*尿毒症*&quot;) //肾功能受损 replace renal=1 if strmatch(mzzd,&quot;*肾功能受损*&quot;) //肾硬化 replace renal=1 if strmatch(mzzd,&quot;*肾挛缩*&quot;) replace renal=1 if strmatch(mzzd,&quot;*肾萎缩*&quot;) replace renal=1 if strmatch(mzzd,&quot;*肾硬化*&quot;) //肾功能不全 //透析 replace renal=1 if strmatch(mzzd,&quot;*透析*&quot;) replace renal=1 if strmatch(mtbz,&quot;1&quot;)|strmatch(mtbz,&quot;*透析*&quot;) //急性肾小球肾炎 replace renal=1 if strmatch(mtzd,&quot;*急性肾炎综合*&quot;) replace renal=1 if strmatch(mtzd,&quot;*急性肾小球肾炎*&quot;) replace renal=1 if strmatch(mtzd,&quot;*急性肾盂肾炎*&quot;) replace renal=1 if strmatch(mtzd,&quot;*急性链感后肾小球肾炎*&quot;) //慢性肾小球肾炎 replace renal=1 if strmatch(mtzd,&quot;*慢性肾炎*&quot;) replace renal=1 if strmatch(mtzd,&quot;*隐匿性肾小球肾炎*&quot;) //肾病综合征 replace renal=1 if strmatch(mtzd,&quot;*肾病*&quot;) replace renal=1 if strmatch(mtzd,&quot;*肾功能不全*&quot;) replace renal=1 if strmatch(mtzd,&quot;*肾变病*&quot;) //肾衰竭 replace renal=1 if strmatch(mtzd,&quot;*肾衰*&quot;) replace renal=1 if strmatch(mtzd,&quot;*肾功能衰竭*&quot;) replace renal=1 if strmatch(mtzd,&quot;*尿毒症*&quot;) //肾功能受损 replace renal=1 if strmatch(mtzd,&quot;*肾功能受损*&quot;) //肾硬化 replace renal=1 if strmatch(mtzd,&quot;*肾挛缩*&quot;) replace renal=1 if strmatch(mtzd,&quot;*肾萎缩*&quot;) replace renal=1 if strmatch(mtzd,&quot;*肾硬化*&quot;) //肾功能不全 //透析 replace renal=1 if strmatch(mtzd,&quot;*透析*&quot;) keep if renal==1 keep grbm renal bysort grbm:keep if _n==1 codebook grbm //2702 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_renal.dta&quot; } //14. 恶性，白血病，淋巴瘤 malig 740/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen malig=0 replace malig=1 if strmatch(mzzd,&quot;*恶性肿瘤*&quot;) replace malig=1 if strmatch(mzzd,&quot;*淋巴瘤*&quot;) replace malig=1 if strmatch(mzzd,&quot;*白血病*&quot;) replace malig=1 if strmatch(mzzd,&quot;*癌*&quot;) replace malig=1 if strmatch(mzzd,&quot;*肝癌*&quot;)|strmatch(mzzd,&quot;*肝恶性*&quot;)|strmatch(mzzd,&quot;*肝部恶性*&quot;)|strmatch(mzzd,&quot;*肝细胞癌*&quot;)|strmatch(mzzd,&quot;*肝ca*&quot;)|strmatch(mzzd,&quot;*肝Ca*&quot;)|strmatch(mzzd,&quot;*肝CA*&quot;) replace malig=1 if strmatch(mtzd,&quot;*恶性肿瘤*&quot;) replace malig=1 if strmatch(mtzd,&quot;*淋巴瘤*&quot;) replace malig=1 if strmatch(mtzd,&quot;*白血病*&quot;) replace malig=1 if strmatch(mtzd,&quot;*癌*&quot;) replace malig=1 if strmatch(mtbz,&quot;*癌*&quot;) replace malig=1 if strmatch(mtbz,&quot;*恶性肿瘤*&quot;) replace malig=1 if strmatch(mtbz,&quot;3&quot;) replace malig=1 if strmatch(mtzd,&quot;*肝癌*&quot;)|strmatch(mtzd,&quot;*肝恶性*&quot;)|strmatch(mtzd,&quot;*肝部恶性*&quot;)|strmatch(mtzd,&quot;*肝细胞癌*&quot;)|strmatch(mtzd,&quot;*肝ca*&quot;)|strmatch(mtzd,&quot;*肝Ca*&quot;) replace malig=1 if strmatch(cyzdms,&quot;*恶性肿瘤*&quot;) replace malig=1 if strmatch(cyzdms,&quot;*淋巴瘤*&quot;) replace malig=1 if strmatch(cyzdms,&quot;*白血病*&quot;) replace malig=1 if strmatch(cyzdms,&quot;*癌*&quot;) replace malig=1 if strmatch(cyzd,&quot;*肝癌*&quot;)|strmatch(cyzd,&quot;*肝恶性*&quot;)|strmatch(cyzd,&quot;*肝部恶性*&quot;)|strmatch(cyzd,&quot;*肝细胞癌*&quot;)|strmatch(cyzd,&quot;*肝ca*&quot;)|strmatch(cyzd,&quot;*肝Ca*&quot;)|strmatch(cyzd,&quot;*肝CA*&quot;) replace malig=1 if strmatch(cyzdmc,&quot;*恶性肿瘤*&quot;) replace malig=1 if strmatch(cyzdmc,&quot;*淋巴瘤*&quot;) replace malig=1 if strmatch(cyzdmc,&quot;*白血病*&quot;) replace malig=1 if strmatch(cyzdmc,&quot;*癌*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C0*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C1*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C20*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C21*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C22*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C23*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C24*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C25*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C26*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C30*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C31*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C32*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C33*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C34*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C37*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C38*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C39*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C40*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C41*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C43*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C45*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C46*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C47*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C48*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C6*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C70*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C71*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C72*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C73*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C74*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C75*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C76*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C81*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C82*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C83*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C84*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C85*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C88*&quot;) replace malig=1 if strmatch(cyzd,&quot;*C9*&quot;) keep if malig==1 keep grbm malig bysort grbm:keep if _n==1 codebook grbm //740 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_malig.dta&quot; } //15. 中到中度肝病 sliver 38/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen sliver=0 replace sliver=1 if strmatch(mzzd,&quot;*肝衰*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*肝功能衰*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*肝坏死*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*肝静脉阻塞*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*门静脉高压*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*门静脉血压过高*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*门脉高压*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*肝肾综合*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*肝性脑病*&quot;) replace sliver=1 if strmatch(mzzd,&quot;*肝昏迷*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*肝衰*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*肝功能衰*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*肝坏死*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*肝静脉阻塞*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*门静脉高压*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*门静脉血压过高*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*门脉高压*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*肝肾综合*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*肝性脑病*&quot;) replace sliver=1 if strmatch(mtzd,&quot;*肝昏迷*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*肝衰*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*肝功能衰*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*肝坏死*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*肝静脉阻塞*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*门静脉高压*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*门静脉血压过高*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*门脉高压*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*肝肾综合*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*肝性脑病*&quot;) replace sliver=1 if strmatch(cyzdms,&quot;*肝昏迷*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*肝衰*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*肝功能衰*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*肝坏死*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*肝静脉阻塞*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*门静脉高压*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*门静脉血压过高*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*门脉高压*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*肝肾综合*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*肝性脑病*&quot;) replace sliver=1 if strmatch(cyzdmc,&quot;*肝昏迷*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*I85.0*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*I85.9*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*I86.4*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*I98.2*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*K70.4*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*K71.1*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*K72.1*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*K72.9*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*K76.5*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*K76.6*&quot;) replace sliver=1 if strmatch(cyzd,&quot;*K76.7*&quot;) keep if sliver==1 keep grbm sliver bysort grbm:keep if _n==1 codebook grbm //38 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_sliver.dta&quot; } //16. 固体瘤 metas 29/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen metas=0 replace metas=1 if strmatch(mzzd,&quot;*继发性恶性*&quot;) replace metas=1 if strmatch(mzzd,&quot;*继发恶性*&quot;) replace metas=1 if strmatch(mzzd,&quot;*转移性恶性*&quot;) replace metas=1 if strmatch(mzzd,&quot;*转移恶性*&quot;) replace metas=1 if strmatch(mtzd,&quot;*继发性恶性*&quot;) replace metas=1 if strmatch(mtzd,&quot;*继发恶性*&quot;) replace metas=1 if strmatch(mtzd,&quot;*转移性恶性*&quot;) replace metas=1 if strmatch(mtzd,&quot;*转移恶性*&quot;) replace metas=1 if strmatch(cyzdms,&quot;*继发性恶性*&quot;) replace metas=1 if strmatch(cyzdms,&quot;*继发恶性*&quot;) replace metas=1 if strmatch(cyzdms,&quot;*转移性恶性*&quot;) replace metas=1 if strmatch(cyzdms,&quot;*转移恶性*&quot;) replace metas=1 if strmatch(cyzdmc,&quot;*继发性恶性*&quot;) replace metas=1 if strmatch(cyzdmc,&quot;*继发恶性*&quot;) replace metas=1 if strmatch(cyzdmc,&quot;*转移性恶性*&quot;) replace metas=1 if strmatch(cyzdmc,&quot;*转移恶性*&quot;) replace metas=1 if strmatch(cyzd,&quot;*C77*&quot;) replace metas=1 if strmatch(cyzd,&quot;*C78*&quot;) replace metas=1 if strmatch(cyzd,&quot;*C79*&quot;) replace metas=1 if strmatch(cyzd,&quot;*C80*&quot;) keep if metas==1 keep grbm metas bysort grbm:keep if _n==1 codebook grbm //29 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_metas.dta&quot; } //17. 艾滋 hiv 1/15115 { use &quot;H:\\COPD\\ppl_identification\\2016-2020_baseline.dta&quot; sort grbm gen hiv=0 replace hiv=1 if strmatch(mzzd,&quot;*艾滋*&quot;) replace hiv=1 if strmatch(mzzd,&quot;*HIV*&quot;)|strmatch(mzzd,&quot;*hiv*&quot;)|strmatch(mzzd,&quot;*Hiv*&quot;) replace hiv=1 if strmatch(mzzd,&quot;*人体免疫缺*&quot;) replace hiv=1 if strmatch(mtzd,&quot;*艾滋*&quot;) replace hiv=1 if strmatch(mtzd,&quot;*HIV*&quot;)|strmatch(mtzd,&quot;*hiv*&quot;)|strmatch(mtzd,&quot;*Hiv*&quot;) replace hiv=1 if strmatch(mtzd,&quot;*人体免疫缺*&quot;) replace hiv=1 if strmatch(cyzdms,&quot;*艾滋*&quot;) replace hiv=1 if strmatch(cyzdms,&quot;*HIV*&quot;)|strmatch(cyzdms,&quot;*hiv*&quot;)|strmatch(cyzdms,&quot;*Hiv*&quot;) replace hiv=1 if strmatch(cyzdms,&quot;*人体免疫缺*&quot;) replace hiv=1 if strmatch(cyzdmc,&quot;*艾滋*&quot;) replace hiv=1 if strmatch(cyzdmc,&quot;*HIV*&quot;)|strmatch(cyzdmc,&quot;*hiv*&quot;)|strmatch(cyzdmc,&quot;*Hiv*&quot;) replace hiv=1 if strmatch(cyzdmc,&quot;*人体免疫缺*&quot;) replace hiv=1 if strmatch(cyzd,&quot;*B20*&quot;) replace hiv=1 if strmatch(cyzd,&quot;*B21*&quot;) replace hiv=1 if strmatch(cyzd,&quot;*B22*&quot;) replace hiv=1 if strmatch(cyzd,&quot;*B24*&quot;) keep if hiv==1 keep grbm hiv bysort grbm:keep if _n==1 codebook grbm //1 save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_hiv.dta&quot; } } //计算 CCI 得分 { //用2121最大库算 { use &quot;H:\\COPD\\ppl_identification\\2017-2018_all records_grbm.dta&quot; codebook grbm //15115 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_mi.dta&quot; drop _merge replace mi=0 if mi==. codebook mi //2109 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_con_hf.dta&quot; drop _merge replace con_hf=0 if con_hf==. codebook con_hf //1388 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_per_vd.dta&quot; drop _merge replace per_vd=0 if per_vd==. codebook per_vd //1002 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_cere.dta&quot; drop _merge replace cere=0 if cere==. //5457 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_deme.dta&quot; drop _merge replace deme=0 if deme==. //175 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_cpul.dta&quot; drop _merge replace cpul=0 if cpul==. //11577 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_rheu.dta&quot; drop _merge replace rheu=0 if rheu==. //437 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_ulcer.dta&quot; drop _merge replace ulcer=0 if ulcer==. //1538 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_mliver.dta&quot; drop _merge replace mliver=0 if mliver==. //1189 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_dia_sev.dta&quot; drop _merge replace dia_sev=0 if dia_sev==. //2174 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_dia_no sev.dta&quot; drop _merge replace dia=0 if dia==. //4393 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_hemi.dta&quot; drop _merge replace hemi=0 if hemi==. //766 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_renal.dta&quot; drop _merge replace renal=0 if renal==. //2702 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_malig.dta&quot; drop _merge replace malig=0 if malig==. //740 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_sliver.dta&quot; drop _merge replace sliver=0 if sliver==. //38 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_metas.dta&quot; drop _merge replace metas=0 if metas==. //29 merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_hiv.dta&quot; drop _merge replace hiv=0 if hiv==. //1 replace mliver=0 if sliver==1 //28 real changes made replace malig=0 if metas==1 //29 real change made gen cci= 1*mi+1*con_hf+1*per_vd+1*cere+1*deme+1*cpul+1*rheu+1*ulcer+1*mliver+1*dia+2*dia_sev+2*hemi+2*renal+2*malig+3*sliver+6*metas+6*hiv sum cci { Variable | Obs Mean Std. Dev. Min Max -------------+-------------------------------------------------------- cci | 15115 2.794376 2.495582 0 17 } tab cci { cci | Freq. Percent Cum. ------------+----------------------------------- 0 | 1,557 10.30 10.30 1 | 4,287 28.36 38.66 2 | 3,206 21.21 59.87 3 | 1,916 12.68 72.55 4 | 1,103 7.30 79.85 5 | 761 5.03 84.88 6 | 632 4.18 89.06 7 | 602 3.98 93.05 8 | 452 2.99 96.04 9 | 277 1.83 97.87 10 | 179 1.18 99.05 11 | 85 0.56 99.62 12 | 36 0.24 99.85 13 | 13 0.09 99.94 14 | 6 0.04 99.98 15 | 1 0.01 99.99 16 | 1 0.01 99.99 17 | 1 0.01 100.00 ------------+----------------------------------- Total | 15,115 100.00 } keep grbm cci save &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_total.dta&quot; } //6629人merge的结果 得到基线CCI { use &quot;H:\\COPD\\ppl_explore\\2017-2018_inclusion_6629_grbm.dta&quot; merge 1:1 grbm using &quot;H:\\COPD\\baseline characteristic\\CCI\\CCI_total.dta&quot; drop if _merge==2 drop _merge sum cci { Variable | Obs Mean Std. Dev. Min Max -------------+-------------------------------------------------------- cci | 6629 2.946447 2.47193 0 14 } } } } "],["stat常用命令.html", "4 Stat常用命令 4.1 设置核心数 4.2 控制列宽 4.3 格式转换 4.4 变量排序 4.5 文本处理和正则表达式 4.6 变量重命名(rename) 4.7 筛选列(keep) 4.8 排序行 4.9 下一行减去上一行 4.10 筛选出满足AB两个条件中任意一个条件的数据 4.11 取唯一行/删除重复行 4.12 查看每个变量取值出现次数或频率 4.13 计算行数 4.14 计算符合条件的行数 4.15 替代变量中的取值 4.16 合并数据 4.17 按行合并(append) 4.18 forvalue循环 4.19 文档注释 4.20 保存文件(save) 4.21 日期 4.22 将日期延后1整个月 4.23 外部命令 4.24 描述性统计", " 4 Stat常用命令 4.1 设置核心数 我的电脑是6核处理器，因此设置核心数为6 set processor 6 4.2 控制列宽 设置列名为“xmmc”的列的字符宽度为30字符 format xmmc %30s 4.3 格式转换 4.3.1 字符型转数值型 destring varname , replace 4.3.2 将数值型20180904转换为04sep2018 use &quot;G:\\cz\\swsj\\sw_2018_2020.dta&quot;,clear gen sj=string(A_COL2, &quot;%12.0f&quot;) gen swsj=date(sj,&quot;YMD&quot;) format swsj %d 4.3.3 将3 10 2015 这三个变量转化为03oct2015 gen dbsj=mdy(month,day,indexyear) format dbsj %d 4.4 变量排序 4.4.1 order order yyts js //数据中，yyts js变量分别排在一二位 4.4.2 move move grbm sxh //把grbm变量移在sxh之前 4.5 文本处理和正则表达式 4.5.1 字符型和数值型变量转化 字符型变数值型（destring） destring grbm, replace 4.5.2 截取字符型的某几位 例子：截取AAE003变量的5-6位，生生新变量month gen month=substr(AAE003,5,2) 例子：截取AAE003变量的5-6位，并转化为数值型，生生新变量month gen month=real(substr(AAE003,5,6)) 4.6 变量重命名(rename) 4.6.1 重命名变量 rename YKA009 dlbm rename AKE001 sfxmbm 4.6.2 给变量加标签 label variable dlbm &quot;dlbm&quot; label variable sfxmbm &quot;sfxmbm&quot; 4.7 筛选列(keep) keep dlbm sfxmbm xmmc 4.8 排序行 4.8.1 升序排列(sort) sort dlbm sfxmbm 4.8.2 降序排列(gsort) gsort -ticagrelor -clopidogrel -ASA 4.9 下一行减去上一行 sort grbm dbsj bysort grbm:gen GAP=dbsj[_n]-dbsj[_n-1] 4.10 筛选出满足AB两个条件中任意一个条件的数据 符合两个条件（clopidogrel或ticagrelor变量任意取值为1）其中一种的p2y变量值汇总起来 gen p2y=(clopidogrel==1) //(clopidogrel==1)会返回TRUE(1)和FALSE(0)的一列向量 // 如果clopidogrel==1，p2y取值为1，否则为0 replace p2y=1 if ticagrelor==1 4.11 取唯一行/删除重复行 bysort xmmc:keep if _n==1 4.12 查看每个变量取值出现次数或频率 4.12.1 查看每个变量取值的百分比(tab) tab xmmc 4.12.2 查看每个变量取值的次数 取值出现几次，就生成新的一列，值为变量取值出现的次数 bysort grbm:gen num_sw= _N //grbm出现几次，就生成新的一列，值为每个grbm出现的次数 gsort -num_sw -grbm 4.13 计算行数 4.14 计算符合条件的行数 count if MI==1 4.15 替代变量中的取值 replace ACS=1 if _merge==3 4.16 合并数据 4.17 按行合并(append) 法一 use &quot;G:\\ACS\\explore\\ACS_diagnose\\2012_ACS_sample.dta&quot;,clear append using &quot;G:\\ACS\\explore\\ACS_diagnose\\2013_ACS_sample.dta&quot;,force append using &quot;G:\\ACS\\explore\\ACS_diagnose\\2014_ACS_sample.dta&quot;,force 法二 use &quot;G:\\cz\\fyxx\\2015\\2015_zyfyxx_1.dta&quot; set more off forvalues i=2/3{ append using &quot;G:\\cz\\fyxx\\2015\\2015_zyfyxx_`i&#39;.dta&quot; } 4.18 forvalue循环 append using &quot;G:\\cz\\fymx\\2018\\2018_zyfymx_1.dta&quot; keep if cydybz==&quot;1&quot; set more off forvalues i=2/10{ append using &quot;G:\\cz\\fymx\\2018\\2018_zyfymx_`i&#39;.dta&quot; keep if cydybz==&quot;1&quot; } 4.19 文档注释 Case 1：对整行进行注释 *希望Stata版块能给您带来快乐！ //希望Stata版块能给您带来快乐！ Case 2：对结尾进行注释 sysuse auto,clear reg price rep78 weight //进行回归分析 Case 3：对多行进行注释 /*sysuse auto,clear reg price rep78 weight 进行回归分析 */ Case 4：长命令进行换行 行尾打一个空格，再打三个正斜杠，即可实现长命令换行效果 sysuse auto,clear scatter mpg weight, msymbol(Oh) || /// lfit mpg weight 4.20 保存文件(save) save &quot;G:\\ACS\\explore\\ACS_diagnose\\2015_ACS_sample.dta&quot;,replace 4.21 日期 4.22 将日期延后1整个月 将日期从01dec2016 延期至01jan2017 ssc install egenmore //需要装外部命令 egen dbsj_lag = bomd(dbsj), f(%d) lag(-1) 4.23 外部命令 ssc install egenmore //安装时间处理函数eomd 4.24 描述性统计 codebook varname summarize varname //返回观测数、均值、标准差、最小最大值 "],["描述统计.html", "5 描述统计 5.1 均值", " 5 描述统计 5.1 均值 "],["假设检验.html", "6 假设检验 6.1 t检验 6.2 方差分析 6.3 卡方检验", " 6 假设检验 6.1 t检验 两组检验 检验reval在的平均年龄否有区别 ttest nl, by(reval) 6.2 方差分析 bysort ABCD: sum nl oneway 待检验变量 分类变量 oneway nl ABCD 6.3 卡方检验 两组检验 检验reval在每年的人数比例是否有区别 tab year reval,chi2 三组检验 tab ABCD female,chi2 "],["结果解释.html", "7 结果解释 7.1 变量取对数时回归系数的解读", " 7 结果解释 7.1 变量取对数时回归系数的解读 如果模型是\\(y=\\beta_0+\\beta_1x+\\epsilon\\)，则\\(x\\)变化1个单位，\\(y\\)变动\\(\\beta_1\\)个单位。 如果模型是\\(y=\\beta_0+\\beta_1lnx+\\epsilon\\)，则\\(x\\)变化1%个单位，\\(y\\)变动\\(\\beta_1\\%\\)个单位，即0.01\\(\\beta1\\)单位。 如果模型是\\(lny=\\beta_0+\\beta_1lnx+\\epsilon\\)，则\\(x\\)变化1个单位，\\(y\\)变动\\(100\\beta_1\\%\\)个单位。 如果模型是\\(lny=\\beta_0+\\beta_1lnx+\\epsilon\\)，则\\(x\\)变化1%个单位，\\(y\\)变动\\(\\beta_1\\%\\)个单位。 推导 1.linear方程中x变化一单位，对y的影响。 原方程 \\[ y=\\alpha+\\beta x+\\epsilon \\tag{1} \\] x增加1单位后 \\[ y*=\\alpha+\\beta *(x+1)+\\epsilon \\tag{2} \\] \\((2)\\)式-\\((1)\\)式得 \\[ \\begin{aligned} \\Delta y=&amp;[\\alpha+\\beta *(x+1)+\\epsilon] - [\\alpha+\\beta x+\\epsilon]\\\\ =&amp;\\alpha-\\alpha+\\beta *(x+1)-\\beta x+\\epsilon-\\epsilon\\\\ =&amp;\\beta \\end{aligned} \\tag{3} \\] 3.log-linear方程中x变化一单位，对y的影响。 原方程 \\[ \\begin{aligned} ln Y&amp;=\\alpha+\\beta X+\\epsilon \\\\ 两边同时取指数\\quad Y&amp;=e^{\\alpha+\\beta X+\\epsilon} \\end{aligned} \\tag{1} \\] x增加1单位后 \\[ Y^*=e^{\\alpha+\\beta *(X+1)+\\epsilon} \\tag{2} \\] \\((2)\\)式÷\\((1)\\)式得 \\[ \\begin{aligned} \\frac{Y^*}{Y}&amp;=\\frac{e^{\\alpha+\\beta *(X+1)+\\epsilon} }{e^{\\alpha+\\beta X+\\epsilon}} \\\\ &amp;=e^{\\alpha+\\beta *(X+1)+\\epsilon-(\\alpha+\\beta X+\\epsilon)}\\\\ &amp;=e^{\\alpha-\\alpha+\\beta *(X+1)-\\beta X+\\epsilon-\\epsilon}\\\\ &amp;=e^{\\alpha-\\alpha+\\beta *(X+1)-\\beta X+\\epsilon-\\epsilon}\\\\ &amp;=e^{\\beta} \\end{aligned} \\tag{3} \\] 也就是说，X增加1单位，Y会变为原来的\\(e^\\beta\\)倍。 当\\(\\beta\\)很小时，\\(e^\\beta \\approx 1+\\beta\\)，此处暂时不证明，但是画一个图像直观感受。等解释完含义后再证明。 也就是说，X增加1单位，Y会变为原来的\\(e^\\beta\\)倍，即Y变为原来的\\(1+\\beta\\)倍，即\\(Y\\)增加\\(100\\beta\\%\\)个单位，例如\\(\\beta\\)=0.06时，可以理解为，X增加1单位，Y会变为原来的\\(106\\%\\)倍，即Y增加了6%。 \\[ \\begin{aligned} \\frac{Y^*}{Y}&amp;=e^{\\beta}\\\\ &amp;=1+\\beta\\\\ &amp;=100\\%+\\beta \\end{aligned} \\tag{4} \\] 图7.1: e^x和x+1的图像 \\[\\begin{pmatrix} {\\sigma_u^2+\\sigma_\\epsilon^2}&amp;{\\sigma_u^2}&amp;{\\cdots}&amp;{\\sigma_u^2}\\\\ {\\sigma_u^2}&amp;{\\sigma_u^2+\\sigma_\\epsilon^2}&amp;{\\cdots}&amp;{\\sigma_u^2}\\\\ {\\vdots}&amp;{\\vdots}&amp;{\\ddots}&amp;{\\vdots}\\\\ {\\sigma_u^2}&amp;{\\sigma_u^2}&amp;{\\cdots}&amp;{\\sigma_u^2+\\sigma_\\epsilon^2}\\\\ \\end{pmatrix}\\] \\[ E(X)= \\] "],["references.html", "References", " References "]]
